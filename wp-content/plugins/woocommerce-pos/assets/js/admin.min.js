var POS=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){var d=c(1),e=c(19),f=c(58),g=c(68),h=c(75),i=c(80);c(111);var j=new d;j.entities=new e({app:j}),j.settingsApp=new i({container:j.layout.getRegion("main")}),j.modalApp=new f({container:j.layout.getRegion("modal")}),j.tabsService=new g,j.buttonsService=new h,a.exports=j},function(a,b,c){var d=c(2),e=c(16),f=c(5),g=c(17),h=c(13)("admin"),i=c(4),j=i.channel("router");a.exports=d.extend({initialize:function(){this.layout=new g,this.layout.render(),this.listenTo(j,{"before:enter:route":this.onBeforeEnterRoute,"enter:route":this.onEnterRoute,"error:route":this.onErrorRoute})},onBeforeStart:function(a){a=a||{},h("starting WooCommerce POS admin app"),this.settingsApp.tabsArray=f.map(a.settings,function(a){return f.pick(a,["id","label"])});var b=f.map(a.settings,function(a){return f.set(a,["data","id"],a.id),a.data}),c=i.request("entities","get",{type:"collection",name:"settings"});c.add(b)},onStart:function(){e.history.start()},onBeforeEnterRoute:function(){this.transitioning=!0},onEnterRoute:function(){this.transitioning=!1},onErrorRoute:function(){this.transitioning=!1}})},function(a,b,c){var d=c(3),e=c(4),f=c(5),g=c(6),h=c(7),i=c(8),j=c(10),k=c(13),l=c(16),m=c(9);a.exports=d.Application.extend({_initChannel:function(){this.channelName=f.result(this,"channelName")||"global",this.channel=f.result(this,"channel")||e.channel(this.channelName)},_initDebug:function(a){a&&k.enable("*"),e.DEBUG=a,console.info("Debugging is "+(a?"on":"off")+", visit http://woopos.com.au/docs/debugging")},_initOptions:function(a){a=a||{},h.Templates=a.templates||{},j.extend(a.i18n),this.options=a.params||{},this._initDebug(this.options.debug),l.emulateHTTP=this.options.emulateHTTP===!0,m.settings=this.options.accounting},start:function(a){var b=this;g.getJSON(a.ajaxurl,{action:a.action||"wc_pos_payload",security:a.nonce},function(a){b._initOptions(a),d.Application.prototype.start.call(b,a)})},set:function(a,b){f.set(this,a,b)},namespace:function(a){var b=window.adminpage?"wc_pos-":"";return b+a},debug:k,polyglot:j,Utils:i}),d.TemplateCache.prototype.loadTemplate=function(a){return f.get(h.Templates,a.split("."),g(a).html())},d.TemplateCache.prototype.compileTemplate=function(a){return h.compile(a)}},function(a,b){a.exports=Marionette},function(a,b){a.exports=Backbone.Radio},function(a,b){a.exports=_},function(a,b){a.exports=jQuery},function(a,b){a.exports=Handlebars},function(a,b,c){var d=c(9),e=c(5),f={};f.round=function(a,b,c){e.isFinite(parseInt(b,10))||(b=d.settings.currency.precision);var f,g,h,i;if(f=Math.pow(10,b),a*=f,i=a>0|-(0>a),h=a%1===.5*i,g=Math.floor(a),h)switch(c){case"2":case"PHP_ROUND_HALF_DOWN":a=g+(0>i);break;case"3":case"PHP_ROUND_HALF_EVEN":a=g+g%2*i;break;case"4":case"PHP_ROUND_HALF_ODD":a=g+!(g%2);break;default:a=g+(i>0)}return(h?a:Math.round(a))/f},f.decimalPlaces=function(a){return(+a).toFixed(4).replace(/^-?\d*\.?|0+$/g,"").length},f.unformat=function(a){return d.unformat(a,d.settings.number.decimal)},f.formatNumber=function(a,b){return"auto"===b&&(b=f.decimalPlaces(a)),e.isFinite(parseInt(b,10))||(b=d.settings.currency.precision),d.formatNumber(a,b)},f.formatMoney=function(a,b){return"auto"===b&&(b=f.decimalPlaces(a)),e.isFinite(parseInt(b,10))||(b=d.settings.currency.precision),a=f.round(a,b),d.formatMoney(a)},f.isPositiveInteger=function(a,b){var c=~~Number(a);return b?String(c)===a&&c>=0:String(c)===a&&c>0},f.parseErrorResponse=function(a){var b=a.responseJSON;return b.errors?b.errors[0].message:a.responseText},f.toType=function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},a.exports=f},function(a,b){a.exports=accounting},function(a,b,c){var d=c(11);a.exports=new d},function(a,b,c){a.exports=c(12)},function(a,b,c){var d,e;!function(c,f){d=[],e=function(){return f(c)}.apply(b,d),!(void 0!==e&&(a.exports=e))}(this,function(a){"use strict";function b(a){a=a||{},this.phrases={},this.extend(a.phrases||{}),this.currentLocale=a.locale||"en",this.allowMissing=!!a.allowMissing,this.warn=a.warn||i}function c(a){var b,c,d,e={};for(b in a)if(a.hasOwnProperty(b)){c=a[b];for(d in c)e[c[d]]=b}return e}function d(a){var b=/^\s+|\s+$/g;return a.replace(b,"")}function e(a,b,c){var e,f,h;return null!=c&&a?(f=a.split(k),h=f[g(b,c)]||f[0],e=d(h)):e=a,e}function f(a){var b=c(m);return b[a]||b.en}function g(a,b){return l[f(a)](b)}function h(a,b){for(var c in b)"_"!==c&&b.hasOwnProperty(c)&&(a=a.replace(new RegExp("%\\{"+c+"\\}","g"),b[c]));return a}function i(b){a.console&&a.console.warn&&a.console.warn("WARNING: "+b)}function j(a){var b={};for(var c in a)b[c]=a[c];return b}b.VERSION="0.4.3",b.prototype.locale=function(a){return a&&(this.currentLocale=a),this.currentLocale},b.prototype.extend=function(a,b){var c;for(var d in a)a.hasOwnProperty(d)&&(c=a[d],b&&(d=b+"."+d),"object"==typeof c?this.extend(c,d):this.phrases[d]=c)},b.prototype.clear=function(){this.phrases={}},b.prototype.replace=function(a){this.clear(),this.extend(a)},b.prototype.t=function(a,b){var c,d;return b=null==b?{}:b,"number"==typeof b&&(b={smart_count:b}),"string"==typeof this.phrases[a]?c=this.phrases[a]:"string"==typeof b._?c=b._:this.allowMissing?c=a:(this.warn('Missing translation for key: "'+a+'"'),d=a),"string"==typeof c&&(b=j(b),d=e(c,this.currentLocale,b.smart_count),d=h(d,b)),d},b.prototype.has=function(a){return a in this.phrases};var k="||||",l={chinese:function(a){return 0},german:function(a){return 1!==a?1:0},french:function(a){return a>1?1:0},russian:function(a){return a%10===1&&a%100!==11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2},czech:function(a){return 1===a?0:a>=2&&4>=a?1:2},polish:function(a){return 1===a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2},icelandic:function(a){return a%10!==1||a%100===11?1:0}},m={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return b})},function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,c=this.useColors;if(a[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+a[0]+(c?"%c ":" ")+"+"+b.humanize(this.diff),!c)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?b.storage.removeItem("debug"):b.storage.debug=a}catch(c){}}function h(){var a;try{a=b.storage.debug}catch(c){}return a}function i(){try{return window.localStorage}catch(a){}}b=a.exports=c(14),b.log=f,b.formatArgs=e,b.save=g,b.load=h,b.useColors=d,b.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),b.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],b.formatters.j=function(a){return JSON.stringify(a)},b.enable(h())},function(a,b,c){function d(){return b.colors[k++%b.colors.length]}function e(a){function c(){}function e(){var a=e,c=+new Date,f=c-(j||c);a.diff=f,a.prev=j,a.curr=c,j=c,null==a.useColors&&(a.useColors=b.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=b.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(c,d){if("%%"===c)return c;h++;var e=b.formatters[d];if("function"==typeof e){var f=g[h];c=e.call(a,f),g.splice(h,1),h--}return c}),"function"==typeof b.formatArgs&&(g=b.formatArgs.apply(a,g));var i=e.log||b.log||console.log.bind(console);i.apply(a,g)}c.enabled=!1,e.enabled=!0;var f=b.enabled(a)?e:c;return f.namespace=a,f}function f(a){b.save(a);for(var c=(a||"").split(/[\s,]+/),d=c.length,e=0;d>e;e++)c[e]&&(a=c[e].replace(/\*/g,".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$")))}function g(){b.enable("")}function h(a){var c,d;for(c=0,d=b.skips.length;d>c;c++)if(b.skips[c].test(a))return!1;for(c=0,d=b.names.length;d>c;c++)if(b.names[c].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}b=a.exports=e,b.coerce=i,b.disable=g,b.enable=f,b.enabled=h,b.humanize=c(15),b.names=[],b.skips=[],b.formatters={};var j,k=0},function(a,b){function c(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*k;case"days":case"day":case"d":return c*j;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*h;case"seconds":case"second":case"secs":case"sec":case"s":return c*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function d(a){return a>=j?Math.round(a/j)+"d":a>=i?Math.round(a/i)+"h":a>=h?Math.round(a/h)+"m":a>=g?Math.round(a/g)+"s":a+"ms"}function e(a){return f(a,j,"day")||f(a,i,"hour")||f(a,h,"minute")||f(a,g,"second")||a+" ms"}function f(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var g=1e3,h=60*g,i=60*h,j=24*i,k=365.25*j;a.exports=function(a,b){return b=b||{},"string"==typeof a?c(a):b["long"]?e(a):d(a)}},function(a,b){a.exports=Backbone},function(a,b,c){var d=c(18);a.exports=d.extend({el:"#wpbody-content .wrap",template:function(){return'<div id="wc_pos-admin"></div><div id="wc_pos-modal"></div>'},regions:{main:"#wc_pos-admin",modal:"#wc_pos-modal"}})},function(a,b,c){var d=c(3),e=c(2);a.exports=e.prototype.LayoutView=d.LayoutView.extend({working:function(a){"start"===a?this.$el.addClass("working"):this.$el.removeClass("working")}})},function(a,b,c){(function(b){var d=c(20),e=c(21),f=c(46),g=c(48),h=c(50),i=c(52),j=c(54),k=c(55),l=c(56),m=c(35),n=c(13)("entities"),o=c(2),p=c(5),q=b.localStorage||window.localStorage,r=b.JSON||window.JSON,s=d.extend({channelName:"entities",initialize:function(){this.channel.reply("get",this.get,this),this.channel.reply("set",this.set,this),this.channel.reply("remove",this.remove,this),this.channel.reply("set:filter",this.setFilter,this)},collections:{products:e,orders:f,cart:g,customers:h,coupons:i,gateways:l,settings:k},getMethods:{collection:"getCollection",model:"getModel",filtered:"getFiltered",option:"getOption",settings:"getSettings",localStorage:"getLocalStorage"},setMethods:{localStorage:"setLocalStorage"},get:function(a){a=a||{};var b=this.getMethods[a.type];return this[b]?this[b](a):void n('request needs a type, eg: "collection" or "option"')},set:function(a){a=a||{};var b=this.setMethods[a.type];return this[b]?this[b](a):void n('set needs a type, eg: "localStorage"')},attach:function(a){var b="model"===a.type?"models":"collections",c="_"+a.name;return this[b].hasOwnProperty(a.name)&&(this[c]=new this[b][a.name]([],a)),this[c]},getCollection:function(a){var b="_"+a.name;return a.init?new this.collections[a.name]([],a):this[b]||this.attach(a)},getAllCollections:function(){return p.reduce(this.collections,function(a,b,c){return a[c]=this.getCollection({name:c}),a},{},this)},getModel:function(a){var b="_"+a.name;return a.init?new this.models[a.name]([],a):this[b]||this.attach(a)},getFiltered:function(a){var b="_"+a.name,c="_filtered"+a.name;return this[c]?this[c]:(this[b]||this.attach(a),this[c]=new m(this[b],a),this[c])},getOption:function(a){return this.app.getOption(a.name)},getSettings:function(a){var b=this.app.getOption(a.name);return new j(b)},setFilter:function(a){a=a||{};var b="_filtered"+a.name;this[b]&&this[b].filterBy("search",a.filter)},serialize:function(a){return r.stringify(a)},deserialize:function(a){try{a=r.parse(a)}catch(b){n(b)}return a||void 0},getLocalStorage:function(a){a=a||{};var b=q.getItem("wc_pos_"+a.name),c=this.deserialize(b);return a.key&&c&&c[a.key]?c[a.key]:c},setLocalStorage:function(a){a=a||{};var b=a.data,c=this.getLocalStorage({name:a.name});p.isObject(c)&&p.isObject(b)&&(b=p.extend(c,b)),q.setItem("wc_pos_"+a.name,this.serialize(b))},remove:function(a){if(a=a||{},"localStorage"===a.type&&a.name&&a.key){var b=this.getLocalStorage({name:a.name});delete b[a.key],q.setItem("wc_pos_"+a.name,r.stringify(b))}else q.removeItem("wc_pos_"+a.name)},idbCollections:function(){return p.reduce(this.getAllCollections(),function(a,b,c){return b instanceof o.IndexedDBCollection&&(a[c]=b),a},{},this)}});a.exports=s,o.prototype.set("Entities.Service",s)}).call(b,function(){return this}())},function(a,b,c){var d=c(3),e=c(4),f=c(2),g=c(5);a.exports=f.prototype.Service=d.Object.extend({constructor:function(a){a=a||{},this.channelName&&(this.channel=e.channel(g.result(this,"channelName"))),a.app&&(this.app=a.app),d.Object.apply(this,arguments)},start:function(){this.triggerMethod("before:start"),this._isStarted=!0,this.triggerMethod("start")},stop:function(){this.triggerMethod("before:stop"),this._isStarted=!1,this.triggerMethod("stop")},isStarted:function(){return this._isStarted===!0}})},function(a,b,c){var d=c(22),e=c(28);a.exports=d.extend({model:e,name:"products"})},function(a,b,c){var d=c(16),e=d.Radio,f=c(13)("dualCollection"),g=c(23),h=c(2),i=c(5),j=c(6),k=c(27);a.exports=h.prototype.DualCollection=g.extend({keyPath:"local_id",mergeKeyPath:"id",_syncDelayed:!0,queue:[],delay:500,url:function(){var a=e.request("entities","get",{type:"option",name:"wc_api"});return a+this.name},state:{pageSize:10},fetch:function(a){return a=a||{},a.remote?this.remoteFetch(a):g.prototype.fetch.call(this,a)},remoteFetch:function(a){var b=this;return this.sync("read",this,a).then(function(a){var c=b.parse(a);return g.prototype.merge.call(b,c)}).then(function(a){var c=i.map(a,function(a){return a.get("id")});b.dequeue(c)})},fullSync:function(){var a=this;return this._syncing?void f("sync already in progress"):(this._syncing=!0,f("fullSync started"),this.trigger("start:fullSync"),this.fetchUpdated().then(function(){return a.auditRecords()}).then(function(){return a._syncDelayed?a.syncDelayed():void 0}).done(function(){f("fullSync complete")}).fail(function(a){f("fullSync failed",a)}).always(function(){a._syncing=!1,a.trigger("end:fullSync")}))},fetchUpdated:function(){var a=this;if(0===this.length)return this.fetch({remote:!0});var b=i.compact(this.pluck("updated_at")).sort().pop();return this.getRemoteIds(b).then(function(b){return a.enqueue(b),a.processQueue({queue:b,all:!0})})},syncDelayed:function(){var a=this.getDelayedModels(),b=i.map(a,function(a){return a.remoteSync(null,a)});return j.when.apply(this,b)},getDelayedModels:function(){return this.filter(function(a){return a.isDelayed()})},auditRecords:function(){var a=this.pluck("id"),b=this;return this.getRemoteIds().then(function(c){var d=i.chain(c).difference(a).compact().value(),e=i.chain(a).difference(c).compact().value();return b.enqueue(d),b.dequeue(e),b.removeGarbage(e)}).done(function(){f("audit complete")}).fail(function(a){f("audit failed",a)})},getRemoteIds:function(a){var b=e.request("entities","get",{type:"option",name:"ajaxurl"});return f(a?"getting updated ids from server since "+a:"getting all ids from server"),j.getJSON(b,{action:"wc_pos_get_all_ids",type:this.name,updated_at_min:a})},removeGarbage:function(a){var b=this.getModelsByRemoteIds(a);if(0!==b.length)return this.remove(b),this.db.removeBatch(i.pluck(b,"id"))},getModelsByRemoteIds:function(a){return this.filter(function(b){return i(a).contains(b.get("id"))})},enqueue:function(a){return i.isArray(a)?void(this.queue=i.union(this.queue,a)):this.queue.push(a)},dequeue:function(a){i.isArray(a)?this.queue=i.difference(this.queue,a):this.queue=i.without(this.queue,a)},hasAllRecords:function(){return 0===this.queue.length},processQueue:function(a){a=a||{};var b=a.queue||i.clone(this.queue);if(0!==b.length&&!this._processingQueue){this._processingQueue=!0,this.trigger("start:processQueue");var c=this,d=new j.Deferred,e=b.splice(0,this.state.pageSize).join(",");return this.fetch({remote:!0,data:{filter:a.filter||{limit:-1,"in":e}}}).done(function(){a.all&&0!==b.length?(d.progress(e),i.delay(c.processQueue.bind(c),c.getDelay(),a)):d.resolve()}).fail(d.reject).always(function(){c._processingQueue=!1,c.trigger("end:processQueue")}),d.promise()}},getDelay:function(){return e.request("entities","get",{type:"option",name:"delay"})||this.delay},clear:function(){if(this.db){var a=this;return g.prototype.clear.call(this).then(function(){a.queue=[]})}},formatDate:function(a){return a?k(a).toISOString():void 0}})},function(a,b,c){var d=c(24),e=c(2),f=c(25),g=c(4);a.exports=e.prototype.IndexedDBCollection=d.extend({name:"store",storePrefix:"wc_pos_",dbVersion:4005,keyPath:"local_id",autoIncrement:!0,indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"id",keyPath:"id",unique:!0},{name:"status",keyPath:"status",unique:!1}],constructor:function(){d.apply(this,arguments);var a={storeName:this.name,storePrefix:this.storePrefix,dbVersion:this.dbVersion,keyPath:this.keyPath,autoIncrement:this.autoIncrement,indexes:this.indexes,defaultErrorHandler:function(a){g.trigger("global","error",{status:a.target.error.name,message:a.target.error.message})}};this.db=new f(a,this),this.versionCheck(),this.db.open().fail(function(a){g.trigger("global","error",{status:"indexedDB error",message:a})})},merge:function(a){var b=this;return this.db.merge(a).then(function(){var a=Array.prototype.slice.apply(arguments);return b.add(a,{merge:!0})})},clear:function(){if(this.db){var a=this;return this.db.open().then(function(){return a.reset(),a.db.clear()})}},versionCheck:function(){var a=this.name,b=parseInt(g.request("entities","get",{type:"option",name:"idbVersion"}),10)||0,c=parseInt(g.request("entities","get",{type:"localStorage",name:a+"_idbVersion"}),10)||0;b!==c&&this.clear().then(function(){g.request("entities","set",{type:"localStorage",name:a+"_idbVersion",data:b})})}})},function(a,b,c){var d=c(16),e=c(2);a.exports=e.prototype.Collection=d.Collection.extend({constructor:function(){d.Collection.apply(this,arguments),this._isNew=!0,this.once("sync",function(){this._isNew=!1})},isNew:function(){return this._isNew},parse:function(a){return a&&a[this.name]?a[this.name]:a},sync:function(){return d.sync.apply(this,arguments)}})},function(a,b,c){function d(a,b){this.parent=b,this.options=a,a.defaultErrorHandler&&(j=a.defaultErrorHandler)}var e=c(26),f=c(6),g=c(5),h=c(16),i=function(){},j=function(a){throw a},k={open:function(){if(this._open)return this._open;var a=new f.Deferred,b=this.options||{};return b.onStoreReady=a.resolve,b.onError=a.reject,this.store=new e(b),this._open=a.promise(),this._open},create:function(a,b){b=b||{};var c=b.success||i,d=b.error||j,e=this._returnAttributes(a),f=this.store.keyPath;return this.put(e).then(function(a){return e[f]=a,c(e),e}).fail(d)},update:function(a,b){b=b||{};var c=b.success||i,d=b.error||j,e=this._returnAttributes(a),f=this;return this.put(e).then(function(a){return f.get(a).done(c).fail(d)}).fail(d)},read:function(a,b){b=b||{};var c=b.success||i,d=b.error||j;return this.get(a.id).done(c).fail(d)},destroy:function(a,b){if(a.isNew())return!1;b=b||{};var c=b.success||i,d=b.error||j;return this.remove(a.id).done(c).fail(d)},put:function(a,b){var c=new f.Deferred;return null!==this.store.keyPath?this.store.put(a,c.resolve,c.reject):this.store.put(a,b,c.resolve,c.reject),c.promise()},get:function(a){var b=new f.Deferred;return this.store.get(a,b.resolve,b.reject),b.promise()},remove:function(a){return g.isObject(a)&&a.hasOwnProperty(this.store.keyPath)&&(a=a[this.store.keyPath]),this._remove(a)},_remove:function(a){var b=new f.Deferred;return this.store.remove(a,b.resolve,b.reject),b.promise()},getAll:function(a){var b=new f.Deferred,c=function(c){a.success.apply(this,arguments),b.resolve(c)},d=function(c){a.error.apply(this,arguments),b.reject(c)};return this.store.getAll(c,d),b.promise()},iterate:function(a){a=a||{};var b=new f.Deferred;a.onEnd=b.resolve,a.onError=b.reject;var c=b.notify;return this.store.iterate(c,a),b.promise()},makeKeyRange:function(a){return this.store.makeKeyRange(a)},saveAll:function(){return this.putBatch(this.parent.toJSON())},batch:function(a){var b=new f.Deferred;return this.store.batch(a,b.resolve,b.reject),b.promise()},putBatch:function(a){return g.isArray(a)?this._putBatch(a):this.put(a)},_putBatch:function(a){var b=new f.Deferred;return this.store.putBatch(a,b.resolve,b.reject),b.promise()},removeBatch:function(a){return g.isArray(a)?this._removeBatch(a):this.remove(a)},_removeBatch:function(a){var b=new f.Deferred;return this.store.removeBatch(a,b.resolve,b.reject),b.promise()},clear:function(){var a=new f.Deferred;return this.store.clear(a.resolve,a.reject),a.promise()},query:function(a,b){var c=new f.Deferred;return this.store.query(c.resolve,{index:a,keyRange:b,onError:c.reject}),c.promise()},getByAttribute:function(a){var b=g.chain(a).keys().first().value(),c=this.store.makeKeyRange({only:g.chain(a).values().first().value()});return this.query(b,c)},merge:function(a){if(a=g.isArray(a)?a:[a],!this.parent.mergeKeyPath)return this.putBatch(a);var b=g.map(a,this._merge,this);return f.when.apply(this,b)},_merge:function(a){var b=this.parent.mergeKeyPath,c=this.store.keyPath,d=this,e={};return a[c]?this.update(a):(e[b]=a[b],this.getByAttribute(e).then(function(b){var e=g.first(b);return e?(a[c]=e[c],d.update(a)):d.create(a)}))},_returnAttributes:function(a){return a instanceof h.Model?a.toJSON():a}};g.extend(d.prototype,k),a.exports=d},function(a,b){a.exports=IDBStore},function(a,b){a.exports=moment},function(a,b,c){var d=c(29),e=c(5),f=c(33),g=c(35);a.exports=d.extend({name:"product",fields:["title"],schema:{price:"number",regular_price:"number",sale_price:"number",stock_quantity:"number"},initialize:function(){this.on({"change:updated_at":this.onUpdate})},onUpdate:function(){if("variable"===this.get("type")){var a=this.getVariations().superset();a.set(this.get("variations"))}},productAttributes:function(){return e.chain(this.get("attributes")).where({variation:!1}).where({visible:!0}).value()},productVariations:function(){return e.where(this.get("attributes"),{variation:!0})},matchMaker:function(a,b,c){var d=e.all(a,function(a){return"prefix"===a.type&&"barcode"===a.prefix&&a.query?this.barcodeMatch(a.query):"prefix"===a.type&&"cat"===a.prefix?(a.prefix="categories",b.prefix(a,this)):void 0},this);return d?d:c(a,this)},barcodeMatch:function(a){var b=this.get("type"),c=this.get("barcode").toLowerCase(),d=a.toString().toLowerCase();return c===d?("variable"!==b&&this.trigger("match:barcode",this),!0):"variable"!==b?this.partialBarcodeMatch(c,d):this.variableBarcodeMatch(c,d)},partialBarcodeMatch:function(a,b){return-1!==a.indexOf(b)?!0:!1},variableBarcodeMatch:function(a,b){var c;return this.getVariations().superset().each(function(a){var d=a.get("barcode").toLowerCase();return d===b?void(c=a):-1!==d.indexOf(b)?void(c="partial"):void 0}),c?("partial"!==c&&this.trigger("match:barcode",c,this),!0):this.partialBarcodeMatch(a,b)},getVariationOptions:function(){if(this._variationOptions)return this._variationOptions;var a=this.get("variations"),b=e.pluck(a,"attributes").reduce(function(a,b){return e.each(b,function(b){return a[b.name]?a[b.name].push(b.option):void(a[b.name]=[b.option])}),a},{});return this._variationOptions=e.map(b,function(a,b){return{name:b,options:e.uniq(a)}}),this._variationOptions},getVariations:function(){if("variable"!==this.get("type"))return!1;if(!this._variations){var a=new f(this.get("variations"),{parent:this});this._variations=new g(a)}return this._variations}})},function(a,b,c){var d=c(30),e=c(2),f=c(5),g=c(13)("dualModel");a.exports=e.prototype.DualModel=d.extend({idAttribute:"local_id",remoteIdAttribute:"id",fields:["title"],validate:function(a){var b={};a[this.idAttribute]&&(b[this.idAttribute]=parseInt(a[this.idAttribute],10)),a[this.remoteIdAttribute]&&(b[this.remoteIdAttribute]=parseInt(a[this.remoteIdAttribute],10)),this.set(b,{silent:!0})},url:function(){var a=this.get(this.remoteIdAttribute),b=f.result(this.collection,"url");return a?""+b+"/"+a+"/":b},states:{update:"UPDATE_FAILED",create:"CREATE_FAILED","delete":"DELETE_FAILED"},hasRemoteId:function(){return!!this.get(this.remoteIdAttribute)},isDelayed:function(){var a=this.get("status");return a===this.states.update||a===this.states.create||a===this.states["delete"]},sync:function(a,b,c){c=c||{};var e=f.clone(c);e.remote=void 0;var g="patch"===a?"update":a;return this.setStatus(g),d.prototype.sync.call(this,g,b,e).then(function(){return c.remote?b.remoteSync(a,b,c):void 0})},remoteSync:function(a,b,c){return b=b||this,c=c||{},c.remote=!0,a=a||b.getMethod(),d.prototype.sync.call(this,a,b,c).then(function(a){if(a){var c=b.parse(a);return b.merge(c)}})},setStatus:function(a){this.states[a]&&("update"!==a||this.hasRemoteId()||(a="create"),this.set({status:this.states[a]}))},getMethod:function(){var a=this.get("status"),b=f.findKey(this.states,function(b){return b===a});return b?b:void g("No method given for remote sync")},merge:function(a){return this.set(a),this.isDelayed()&&this.unset("status"),this.collection&&this.collection.db?this.collection.merge(this.toJSON()):void 0}})},function(a,b,c){var d=c(2),e=c(31),f=c(32);a.exports=d.prototype.DeepModel=e.extend(f)},function(a,b,c){var d=c(16),e=c(2),f=c(5),g={"float":parseFloat,"int":parseInt,number:function(a){return a=Number(a),f.isNaN(a)?0:a}};a.exports=e.prototype.Model=d.Model.extend({parse:function(a){var b=a&&a[this.name]?a[this.name]:a;if(b)return f.each(this.schema,function(a,c){f.has(b,c)&&f.isString(a)&&g[a]&&(b[c]=g[a](b[c]))},this),b}})},function(a,b,c){function d(a){var b={},c=i.keyPathSeparator;for(var e in a){var f=a[e];if(!f||f.constructor!==Object&&f.constructor!==Array||h.isEmpty(f))b[e]=f;else{var g=d(f);for(var j in g){var k=g[j];b[e+c+j]=k}}}return b}function e(a,b,c){for(var d=i.keyPathSeparator,e=b?b.split(d):[],f=a,g=0,j=e.length;j>g;g++){if(c&&!h.has(f,e[g]))return!1;if(f=f[e[g]],null==f&&j-1>g&&(f={}),"undefined"==typeof f)return c?!0:f}return c?!0:f}function f(a,b,c,d){d=d||{};for(var e=i.keyPathSeparator,f=b?b.split(e):[],g=a,j=0,k=f.length;k>j&&void 0!==g;j++){var l=f[j];if(j===k-1)d.unset?delete g[l]:g[l]=c;else{if("undefined"==typeof g[l]||!h.isObject(g[l])){if(d.unset)return void delete g[l];var m=f[j+1];g[l]=/^\d+$/.test(m)?[]:{}}g=g[l]}}}function g(a,b){f(a,b,null,{unset:!0})}var h=c(5),i={constructor:function(a,b){var c=a||{};this.cid=h.uniqueId("c"),this.attributes={},b&&b.collection&&(this.collection=b.collection),b&&b.parse&&(c=this.parse(c,b)||{}),c=h.merge({},h.result(this,"defaults"),c),this.set(c,b),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(a){return h.merge({},this.attributes)},get:function(a){return e(this.attributes,a)},set:function(a,b,c){var j,k,l,m,n,o,p,q;if(null==a)return this;if("object"==typeof a?(k=a,c=b||{}):(k={})[a]=b,c||(c={}),!this._validate(k,c))return!1;l=c.unset,n=c.silent,m=[],o=this._changing,this._changing=!0,o||(this._previousAttributes=h.merge({},this.attributes),this.changed={}),q=this.attributes,p=this._previousAttributes,this.idAttribute in k&&(this.id=k[this.idAttribute]),k=d(k);for(j in k)b=k[j],h.isEqual(e(q,j),b)||m.push(j),h.isEqual(e(p,j),b)?g(this.changed,j):f(this.changed,j,b),l?g(q,j):f(q,j,b);if(!n){m.length&&(this._pending=!0);for(var r=i.keyPathSeparator,s={},t=0,u=m.length;u>t;t++){var a=m[t];s.hasOwnProperty(a)&&s[a]||(s[a]=!0,this.trigger("change:"+a,this,e(q,a),c));for(var v=a.split(r),w=v.length-1;w>0;w--){var x=v.slice(0,w).join(r),y=x+r+"*";s.hasOwnProperty(y)&&s[y]||(s[y]=!0,this.trigger("change:"+y,this,e(q,x),c)),s.hasOwnProperty(x)&&s[x]||(s[x]=!0,this.trigger("change:"+x,this,e(q,x),c))}}}if(o)return this;if(!n)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},clear:function(a){var b={},c=d(this.attributes);for(var e in c)b[e]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):void 0!==e(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d(this.changed):!1;var b=this._changing?this._previousAttributes:this.attributes;a=d(a),b=d(b);var c,e=!1;for(var f in a)h.isEqual(b[f],c=a[f])||((e||(e={}))[f]=c);return e},previous:function(a){return null!=a&&this._previousAttributes?e(this._previousAttributes,a):null},previousAttributes:function(){return h.merge({},this._previousAttributes)}};i.keyPathSeparator=".",a.exports=i},function(a,b,c){var d=c(24),e=c(34),f=c(4),g=c(5);a.exports=d.extend({model:e,url:function(){var a=f.request("entities","get",{type:"option",name:"wc_api"});return a+"products"},initialize:function(){this._isNew=!1},compact:function(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];(0===f||f)&&(e[++d]=f)}return e},range:function(a){var b=this.compact(this.pluck(a)),c=0,d=0;return g.isEmpty(b)||(c=g(b).min(),d=g(b).max()),g.uniq([c,d])}})},function(a,b,c){var d=c(30);a.exports=d.extend({name:"product",defaults:{type:"variation"},schema:{price:"number",regular_price:"number",sale_price:"number",stock_quantity:"number"},initialize:function(a,b){b=b||{},this.parent=b.parent,this.set({title:b.parent.get("title")})},save:function(a,b){var c=this;return d.prototype.save.call(this,a,b).then(function(){c.parent.set({variations:c.collection.toJSON()}),c.parent.merge()})}})},function(a,b,c){function d(a,b){this._superset=a,this._filtered=new g(a,b),this._sorted=new h(this._filtered,b),this._paginated=new i(this._sorted,b),j(this._paginated,this),k.call(this,this._filtered,o),k.call(this,this._sorted,q),k.call(this,this._paginated,s),this.initialize(b)}var e=c(5),f=c(16),g=c(36),h=c(39),i=c(41),j=c(37),k=c(42),l=c(43);e.extend(g.prototype,l);var m={superset:function(){return this._superset},getFilteredLength:function(){return this._filtered.length},removeTransforms:function(){return this._filtered.resetFilters(),this._sorted.removeSort(),this._paginated.removePagination(),this},destroy:function(){this.stopListening(),this._filtered.destroy(),this._sorted.destroy(),this._paginated.destroy(),this.length=0,this.trigger("obscura:destroy")}},n=["filterBy","removeFilter","resetFilters","refilter","hasFilter","getFilters","query","getQuery","getTokens","getRemoteFilter"],o=["filtered:add","filtered:remove","filtered:reset"],p=["setSort","reverseSort","removeSort"],q=["sorted:add","sorted:remove"],r=["setPerPage","setPage","getPerPage","getNumPages","getPage","hasNextPage","hasPrevPage","nextPage","prevPage","movePage","removePagination","firstPage","lastPage","appendNextPage"],s=["paginated:change:perPage","paginated:change:page","paginated:change:numPages"],t=["add","create","remove","set","reset","sort","parse","sync","fetch","push","pop","shift","unshift"];e.each(n,function(a){m[a]=function(){var b=g.prototype[a].apply(this._filtered,arguments);return b===this._filtered?this:b}}),e.each(r,function(a){m[a]=function(){var b=i.prototype[a].apply(this._paginated,arguments);return b===this._paginated?this:b}}),e.each(p,function(a){m[a]=function(){var b=h.prototype[a].apply(this._sorted,arguments);return b===this._sorted?this:b}}),e.each(t,function(a){m[a]=function(){throw new Error("Backbone.Obscura: Unsupported method: "+a+"called on read-only proxy")}}),e.extend(d.prototype,m,f.Events),d=f.Collection.extend(d.prototype),d.FilteredCollection=g,d.SortedCollection=h,d.PaginatedCollection=i,a.exports=d},function(a,b,c){function d(){this._filterResultCache={}}function e(a){
for(var b in this._filterResultCache)this._filterResultCache.hasOwnProperty(b)&&delete this._filterResultCache[b][a]}function f(a,b){this._filters[a]&&e.call(this,a),this._filters[a]=b,this.trigger("filtered:add",a)}function g(a){delete this._filters[a],delete this._query,delete this._tokens,e.call(this,a),this.trigger("filtered:remove",a)}function h(a){this._filterResultCache[a.cid]||(this._filterResultCache[a.cid]={});var b=this._filterResultCache[a.cid];for(var c in this._filters)if(this._filters.hasOwnProperty(c)&&(b.hasOwnProperty(c)||(b[c]=this._filters[c].fn(a)),!b[c]))return!1;return!0}function i(){var a=[];this._superset&&(a=this._superset.filter(o.bind(h,this))),this._collection.reset(a),this.length=this._collection.length}function j(a){if(this._filterResultCache[a.cid]={},h.call(this,a)){if(!this._collection.get(a.cid)){for(var b=this.superset().indexOf(a),c=null,d=b-1;d>=0;d-=1)if(this.contains(this.superset().at(d))){c=this.indexOf(this.superset().at(d))+1;break}c=c||0,this._collection.add(a,{at:c})}}else this._collection.get(a.cid)&&this._collection.remove(a);this.length=this._collection.length}function k(a){this._filterResultCache[a.cid]={},h.call(this,a)||this._collection.get(a.cid)&&this._collection.remove(a)}function l(a,b,c){"change:"===a.slice(0,7)&&k.call(this,arguments[1])}function m(a){this.contains(a)&&this._collection.remove(a),this.length=this._collection.length}function n(a){this._superset=a,this._collection=new p.Collection(a.toArray()),q(this._collection,this),this.resetFilters(),this.listenTo(this._superset,"reset sort",i),this.listenTo(this._superset,"add change",j),this.listenTo(this._superset,"remove",m),this.listenTo(this._superset,"all",l)}var o=c(5),p=c(16),q=c(37),r=c(38),s={defaultFilterName:"__default",filterBy:function(a,b){return b||(b=a,a=this.defaultFilterName),f.call(this,a,r(b)),i.call(this),this},removeFilter:function(a){return a||(a=this.defaultFilterName),g.call(this,a),i.call(this),this},resetFilters:function(){return this._filters={},d.call(this),this.trigger("filtered:reset"),i.call(this),this},superset:function(){return this._superset},refilter:function(a){return"object"==typeof a&&a.cid?j.call(this,a):(d.call(this),i.call(this)),this},getFilters:function(){return o.keys(this._filters)},hasFilter:function(a){return o.contains(this.getFilters(),a)},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("filtered:destroy")}};o.extend(n.prototype,s,p.Events),a.exports=n},function(a,b,c){function d(a,b){function c(){b.length=a.length}function d(c){var d=e.toArray(arguments),f="change"===c||"change:"===c.slice(0,7);"reset"===c&&(b.models=a.models),e.contains(h,c)?(e.contains(["add","remove","destroy"],c)?d[2]=b:e.contains(["reset","sort"],c)&&(d[1]=b),b.trigger.apply(this,d)):f&&b.contains(d[1])&&b.trigger.apply(this,d)}var i={};return e.each(e.functions(f.Collection.prototype),function(b){e.contains(g,b)||(i[b]=function(){return a[b].apply(a,arguments)})}),e.extend(b,f.Events,i),b.listenTo(a,"all",c),b.listenTo(a,"all",d),b.models=a.models,c(),b}var e=c(5),f=c(16),g=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],h=["add","remove","reset","sort","destroy","sync","request","error"];a.exports=d},function(a,b,c){function d(a,b){return function(c){return c.get(a)===b}}function e(a,b){return function(c){return b(c.get(a))}}function f(a,b){return i.isArray(b)||(b=null),{fn:a,keys:b}}function g(a){var b=i.keys(a),c=i.map(b,function(b){var c=a[b];return i.isFunction(c)?e(b,c):d(b,c)}),g=function(a){for(var b=0;b<c.length;b++)if(!c[b](a))return!1;return!0};return f(g,b)}function h(a,b){return i.isFunction(a)?f(a,b):i.isObject(a)?g(a):void 0}var i=c(5);a.exports=h},function(a,b,c){function d(a){return k.isFunction(a)?a:function(b){return b.get(a)}}function e(a){return this._comparator?n(this._collection.models,a,d(this._comparator),this._reverse):this._superset.indexOf(a)}function f(a){var b=e.call(this,a);this._collection.add(a,{at:b})}function g(a){this.contains(a)&&this._collection.remove(a)}function h(a){this.contains(a)&&this._collection.indexOf(a)!==e.call(this,a)&&(this._collection.remove(a),f.call(this,a))}function i(){if(!this._comparator)return void this._collection.reset(this._superset.toArray());var a;a=k.isString(this._comparator)||1===this._comparator.length?this._superset.sortBy(this._comparator):this._superset.models.sort(this._comparator),this._collection.reset(this._reverse?a.reverse():a)}function j(a){this._superset=a,this._reverse=!1,this._comparator=null,this._collection=new l.Collection(a.toArray()),m(this._collection,this),this.listenTo(this._superset,"add",f),this.listenTo(this._superset,"remove",g),this.listenTo(this._superset,"change",h),this.listenTo(this._superset,"reset",i)}var k=c(5),l=c(16),m=c(37),n=c(40),o={setSort:function(a,b){return this._reverse="desc"===b?!0:!1,this._comparator=a,i.call(this),a?this.trigger("sorted:add"):this.trigger("sorted:remove"),this},reverseSort:function(){return this._reverse=!this._reverse,i.call(this),this},removeSort:function(){return this.setSort(),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("sorted:destroy")}};k.extend(j.prototype,o,l.Events),a.exports=j},function(a,b,c){function d(a,b){return function(c,d){var e=a(c),f=a(d);return e===f?0:b?f>e?1:-1:f>e?-1:1}}function e(a,b){return 2===a.length?a:d(a,b)}function f(a,b,c,d){c=null===c?g.identity:e(c,d);for(var f=0,h=a.length;h>f;){var i=f+h>>>1;c(a[i],b)<0?f=i+1:h=i}return f}var g=c(5);a.exports=f},function(a,b,c){function d(){if(this._infinite)var a=0,b=this._collection.length;else var a=this.getPage()*this.getPerPage(),b=a+this.getPerPage();return[a,b]}function e(){var a=d.call(this);return this._collection.reset(this.superset().slice(a[0],a[1]))}function f(){var a=0,b=this._collection.length+this.getPerPage();return this._collection.add(this.superset().slice(a,b))}function g(){var a=this.getPerPage(),b=this.superset().length-this._collection.length,c=b%a===0?b/a:Math.floor(b/a)+1;return c+1}function h(){var a=this.superset().length,b=this.getPerPage(),c=a%b===0?a/b:Math.floor(a/b)+1,d=this._totalPages!==c;return this._totalPages=c,d&&this.trigger("paginated:change:numPages",{numPages:c}),this.getPage()>=c?(this.setPage(c-1),!0):void 0}function i(){this._infinite=!1,h.call(this)||e.call(this)}function j(a,b){for(var c=m.max([a.length,b.length]),d=0,e=0;c>d;d+=1,e+=1)if(a[d]!==b[e])if(b[d-1]===a[d])e-=1;else{if(b[d+1]!==a[d])return a[d];e+=1}}function k(a,b,c){if(!h.call(this)){var e,f=d.call(this),g=f[0],i=f[1],k=j(this.superset().slice(g,i),this._collection.toArray()),l=this._infinite&&c.add;l||(e=j(this._collection.toArray(),this.superset().slice(g,i))),e&&this._collection.remove(e),k&&this._collection.add(k,{at:this.superset().indexOf(k)-g})}}function l(a,b){this._superset=a,this._collection=new n.Collection(a.toArray()),this._page=0,this.setPerPage(b&&b.perPage?b.perPage:null),o(this._collection,this),this.listenTo(this._superset,"add remove",k),this.listenTo(this._superset,"reset sort",i)}var m=c(5),n=c(16),o=c(37),p={removePagination:function(){return this._infinite=!1,this.setPerPage(null),this},setPerPage:function(a){return this._perPage=a,i.call(this),this.setPage(0),this.trigger("paginated:change:perPage",{perPage:a,numPages:this.getNumPages()}),this},setPage:function(a){this._infinite=!1;var b=0,c=this.getNumPages()-1;return a=a>b?a:b,a=c>a?a:c,a=0>a?0:a,this._page=a,e.call(this),this.trigger("paginated:change:page",{page:a}),this},getPerPage:function(){return this._perPage||this.superset().length||1},getNumPages:function(){return this._infinite?g.call(this):this._totalPages},getPage:function(){return this._page},hasNextPage:function(){return this.getPage()<this.getNumPages()-1},hasPrevPage:function(){return this.getPage()>0},nextPage:function(){return this.movePage(1),this},prevPage:function(){return this.movePage(-1),this},firstPage:function(){this.setPage(0)},lastPage:function(){this.setPage(this.getNumPages()-1)},movePage:function(a){return this.setPage(this.getPage()+a),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this._page=0,this._totalPages=0,this.length=0,this._infinite=!1,this.trigger("paginated:destroy")},appendNextPage:function(){return this._infinite=!0,f.call(this),this.trigger("paginated:change:page",{page:0}),this}};m.extend(l.prototype,p,n.Events),a.exports=l},function(a,b,c){function d(a,b){e.each(b,function(b){this.listenTo(a,b,function(){var a=e.toArray(arguments);a.unshift(b),this.trigger.apply(this,a)})},this)}var e=c(5);a.exports=d},function(a,b,c){var d=c(5),e=c(44);a.exports={query:function(a,b){return d.isUndefined(b)&&(b=a,a="search"),this._query=b,""===b?this.removeFilter(a):this.filterBy(a,d.bind(e,this,b))},getQuery:function(){return this._query},getTokens:function(){return this._tokens},getRemoteFilter:function(){if(this._tokens){var a={not_in:this.pluck("id").join(",")};return d.each(this._tokens,function(b){"string"===b.type&&(a.q=b.query),"prefix"===b.type&&(a[b.prefix]=b.query)}),a}}}},function(a,b,c){function d(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function e(a,b){return f.all(a,function(a){return i[a.type](a,b)})}var f=c(5),g=c(45),h=new g,i={string:function(a,b){if(a=a||{},!f.isString(a.query))return!1;var c=f.chain(b.fields||["title"]).map(function(a){return b.get(a)}).compact().value();return f.any(c,function(b){return this._partialString(b,a.query.toLowerCase())},this)},prefix:function(a,b){if(a=a||{},!f.isString(a.query))return!1;var c=b.get(a.prefix),e=d(c);return this.hasOwnProperty("_"+e)?this["_"+e](c,a.query.toLowerCase()):void 0},or:function(a,b){return f.any(a.queries,function(a){return this[a.type](a,b)},this)},_string:function(a,b){return a.toLowerCase()===b},_partialString:function(a,b){return-1!==a.toLowerCase().indexOf(b)},_number:function(a,b){return a.toString()===b},_partialNumber:function(a,b){return-1!==a.toString().indexOf(b)},_boolean:function(a,b){return"true"===b?a===!0:"false"===b?a===!1:!1},_array:function(a,b){return f.any(a,function(a){return a.toLowerCase()===b})}};a.exports=function(a,b){var c=f.isArray(a)?a:h.parse(a);return this._tokens=c,b.matchMaker?b.matchMaker(c,i,e):e(c,b)}},function(a,b,c){function d(a){this.options=a||{}}function e(a){var b;return j.any(["SCREEN","OR_OPEN","OR_CLOSE","GROUP_OPEN","GROUP_CLOSE","OR","PREFIX","SPACES","QUOTES","FLAGS"],function(c){return k[c].test(a)?(b=c,!0):(b=void 0,!1)}),b}function f(a){var b=a.pop(),c=a.pop();a.push({type:"or",queries:[c,b]})}function g(a){var b=a.part||{};a.hasarg&&(["range","prange"].indexOf(b.type)>=0?b.to=a.buffer:a.buffer&&a.buffer.length&&(b.query=a.buffer),b.type||(b.type=b.prefix?"prefix":"string"),a.parts.push(b),a.or_at_next_arg&&a.or_at_next_arg+1===a.parts.length&&(f(a.parts),a.or_at_next_arg=0),a.part={},a.buffer="",a.hasarg=!1)}function h(a,b){0!==this._input.length&&(a.character=this._input.shift(),a.character===b?g.call(this,a):(a.buffer+=a.character,a.hasarg=!0,h.call(this,a,b)))}function i(a){a.character=this._input.shift();var b=e.call(this,a.character);return b&&!a.screen?l[b.toLowerCase()].call(this,a):(a.buffer+=a.character,a.hasarg=!0,a.screen=!1),this._input.length>0&&!a.close?void i.call(this,a):void(a.close=void 0)}var j=c(5),k={QUOTES:/['"`]/,SPACES:/[ \t\r\n]/,FLAGS:/[~\+#!\*\/]/,SCREEN:/[\\]/,GROUP_OPEN:/\(/,GROUP_CLOSE:/\)/,OR:/\|/,PREFIX:/:/,RANGE:/-/,OR_OPEN:/\[/,OR_CLOSE:/]/},l={screen:function(a){a.screen=!0},or_open:function(a){a.hasarg?a.buffer+=a.character:(a.part.type="or",a.part.queries=this.parse(this._input.join(""),!0),a.part.queries&&a.part.queries.length&&(a.hasarg=!0,g.call(this,a)))},or_close:function(a){a.close=!0},group_open:function(a){a.hasarg?a.buffer+=a.character:(a.part.type="and",a.part.queries=this.parse(this._input.join(""),!0),a.part.queries&&a.part.queries.length&&(a.hasarg=!0,g.call(this,a)))},group_close:function(a){a.open?(a.close=!0,a.open=void 0):a.buffer+=a.character},or:function(a){a.or_at_next_arg=a.parts.length,a.hasarg&&(a.or_at_next_arg+=1,g.call(this,a))},prefix:function(a){a.part.prefix=a.buffer,a.part.type="prefix",a.buffer="",a.hasarg=!0},range:function(a){a.part.type&&"prefix"===a.part.type?a.part.type="prange":a.part.type="range",a.part.from=a.buffer,a.buffer="",a.hasarg=!0},spaces:function(a){g.call(this,a)},quotes:function(a){a.buffer.length?(a.buffer+=a.character,a.hasarg=!0):h.call(this,a,a.character)},flags:function(a){a.buffer.length?a.buffer+=a.character:(a.part.flags||(a.part.flags=[]),a.part.flags.push(a.character))}},m={parse:function(a,b){var c={parts:[],part:{},open:b,buffer:"",hasarg:!1};return a&&a.length&&"string"==typeof a?(this._input=a.split(""),i.call(this,c),g.call(this,c),c.parts):c.parts}};j.extend(d.prototype,m),a.exports=d},function(a,b,c){var d=c(22),e=c(47),f=c(6),g=c(5),h=c(16);a.exports=d.extend({model:e,name:"orders",_syncDelayed:!1,setActiveOrder:function(a){var b=this.get(a);return b||"new"===a||(b=g.first(this.openOrders())),this.active=b,b},getActiveOrder:function(){var a=this,b=new f.Deferred;return this.active?b.resolve(this.active):this.create().then(function(c){c.cart.order_id=c.id,a.active=c,"cart/new"===h.history.getHash()&&h.history.navigate("cart/"+c.id),b.resolve(c)}),b.promise()},addToCart:function(a){this.getActiveOrder().then(function(b){b.cart.addToCart(a)})},create:function(){var a=new f.Deferred;return d.prototype.create.call(this,{local_id:Date.now()},{wait:!0,success:a.resolve,error:a.reject}),a.promise()},openOrders:function(){return this.filter(function(a){return a.isEditable()})}})},function(a,b,c){var d=c(29),e=c(4),f=c(8),g=c(13)("order"),h=c(2),i=c(6),j=d.extend({name:"order",fields:["customer.first_name","customer.last_name","customer.email"],defaults:{note:"",order_discount:0},initialize:function(a){if(a=a||{},!a.customer){var b=this.getEntities("customers"),c=b["default"]||b.guest||{};this.set({customer_id:c.id,customer:c})}this.tax=this.getEntities("tax"),this.tax_rates=this.getEntities("tax_rates"),this.isEditable()&&(this.attachCart(),this.attachGateways()),this.on({"change:order_discount":this.calcTotals,"change:status":this.isEditable})},getEntities:function(a){return e.request("entities","get",{type:"option",name:a})||{}},isEditable:function(){return void 0===this.get("status")||this.isDelayed()},destroy:function(a){var b=this;return this.cart.db.removeBatch(this.cart.pluck("local_id")).always(function(){return d.prototype.destroy.call(b,a)})},attachCart:function(){var a=e.request("entities","get",{init:!0,type:"collection",name:"cart"});a.order_id=this.id,this.listenTo(a,{"add change":this.calcTotals,remove:this.itemRemoved}),a.db&&a.db.open().then(function(){a.fetchCartItems()}),this.cart=a},clearCart:function(){this.cart&&this.cart.db.removeBatch(this.cart.pluck("local_id"))},attachGateways:function(){this.gateways=e.request("entities","get",{init:!0,type:"collection",name:"gateways"});var a=e.request("entities","get",{type:"option",name:"gateways"});this.gateways.add(a)},itemRemoved:function(){return this.cart.length>0?this.calcTotals():this.destroy()},calcTotals:function(){var a=0,b=0,c=0,d=0,e=this.cart.sum("subtotal"),h=this.cart.sum("total"),i=e-h,j=this.get("order_discount");"yes"===this.tax.calc_taxes&&(a=this.cart.sum("total_tax"),b=this.cart.sum("subtotal_tax"),c=this.cart.sum("total_tax","shipping"),d=b-a),h+=a,h-=j,this.unset("tax_lines",{silent:!0});var k={total:f.round(h,4),subtotal:f.round(e,4),total_tax:f.round(a,4),subtotal_tax:f.round(b,4),shipping_tax:f.round(c,4),cart_discount:f.round(i,4),cart_discount_tax:f.round(d,4),tax_lines:this.cart.itemizedTax()};this.save(k),g("update totals",k)},sum:function(a){for(var b=0,c=0;c<a.length;c++)b+=parseFloat(this.get(a[c]));return b},process:function(){var a=this;return i.when(this.processCart()).then(function(){return a.processGateway()}).then(function(){var b=a.get("id")?"update":"create";return a.remoteSync(b)}).then(function(a){var b=a[0];"failed"===b.get("status")&&b.save({status:"UPDATE_FAILED"})})},processCart:function(){var a={product:[],shipping:[],fee:[]};this.cart.each(function(b){var c=b.get("type");"shipping"!==c&&"fee"!==c&&(c="product"),a[c].push(b.toJSON())}),this.set({line_items:a.product,shipping_lines:a.shipping,fee_lines:a.fee,tax_lines:this.cart.itemizedTax()})},processGateway:function(){var a=this.gateways.findWhere({active:!0}).toJSON();this.set({payment_details:a})}});a.exports=j,h.prototype.set("Entities.Order.Model",j)},function(a,b,c){var d=c(23),e=c(49),f=c(5),g=c(16);a.exports=d.extend({model:e,name:"cart",indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"order",keyPath:"order",unique:!1},{name:"type",keyPath:"type",unique:!1}],productAttributes:["order","title","local_id","product_id","type","price","regular_price","sale_price","taxable","tax_status","tax_class","attributes","meta","method_title","method_id"],comparator:function(a){var b=a.get("type");return"fee"===b?2:"shipping"===b?1:0},fetchCartItems:function(){if(this.order_id){var a=this.add.bind(this),b=this.db.store.makeKeyRange({only:this.order_id});this.db.store.query(a,{index:"order",keyRange:b})}},sum:function(a,b){var c=this.toJSON();return b&&(c=f.where(c,{type:b})),f.pluck(c,a).reduce(function(a,b){return a+b},0)},addToCart:function(a){a=a||{};var b,c=a.model||a;c instanceof g.Model&&(c=c.toJSON()),c.id&&(b=this.findWhere({product_id:c.id}),c.product_id=c.id,delete c.id),b?b.quantity("increase"):b=this._addToCart(c),b.trigger("pulse")},_addToCart:function(a){return a.order=this.order_id,"variation"===a.type&&(a.meta=f.map(a.attributes,function(a,b){return{key:++b,label:a.name,value:a.option}})),this.add(f.pick(a,this.productAttributes))},itemizedTax:function(){var a=f.clone(this.toJSON(),!0),b=f.map(a,function(a){return a.tax?(f.each(a.tax,function(b){b.shipping="shipping"===a.type?b.total:0}),a.tax):void 0}),c=this.sumTaxes(b),d=[];return f.each(c,function(a,b){a.rate_id=b.toString(),d.push(a)}),d},sumTaxes:function(a){return f.reduce(a,function(a,b){return f.merge(a,b,function(a,b){return a&&(b.total+=a.total,b.subtotal+=a.subtotal,b.shipping+=a.shipping),b})},{})}})},function(a,b,c){var d=c(31),e=c(13)("cartItem"),f=c(8),g=c(5),h=c(4);a.exports=d.extend({idAttribute:"local_id",defaults:{subtotal:0,subtotal_tax:0,total_tax:0,total:0,item_tax:0,quantity:1,taxable:!0,tax_class:""},initialize:function(){if(this.tax=h.request("entities","get",{type:"option",name:"tax"})||{},this.tax_rates=h.request("entities","get",{type:"option",name:"tax_rates"})||{},this.on("change:quantity change:item_price change:regular_price change:taxable change:tax_class",this.updateLineTotals),void 0===this.get("item_price")){var a=parseFloat(this.get("price"));this.set({item_price:g.isNaN(a)?0:a})}},updateLineTotals:function(){var a,b,c,d=this.get("quantity"),h=this.get("item_price"),i=this.get("type"),j=parseFloat(this.get("regular_price")),k=this.get("tax_class");this.tax_rates[k]&&(c=g.cloneDeep(this.tax_rates[k])),("shipping"===i||"fee"===i)&&(j=h),a=this.calcTax({price:h,quantity:d,rates:c}),b=this.calcTax({price:j,quantity:d,rates:c,subtotal:!0}),"yes"===this.tax.prices_include_tax&&(j-=b,h-=a);var l={item_subtotal:f.round(j,4),item_subtotal_tax:f.round(b,4),item_tax:f.round(a,4),subtotal:f.round(j*d,4),subtotal_tax:f.round(b*d,4),total_tax:f.round(a*d,4),total:f.round(h*d,4)};this.save(l),e("update totals",l)},calcTax:function(a){var b=0;return"yes"===this.tax.calc_taxes&&this.get("taxable")&&a.rates?b="yes"===this.tax.prices_include_tax?this.calcInclusiveTax(a):this.calcExclusiveTax(a):this.set("tax",void 0),b},calcInclusiveTax:function(a){var b=0,c=0,d=0,e=0,h=0,i=a.price,j=a.rates,k=a.quantity;g.each(j,function(a,d){return"shipping"===this.get("type")&&"no"===a.shipping?void delete j[d]:void("yes"===a.compound?c+=parseFloat(a.rate):b+=parseFloat(a.rate))},this);var l=1+b/100,m=1+c/100;return d=i/m,g.each(j,function(b){var c=parseFloat(b.rate)/100,g=0;"yes"===b.compound?(g=i,c/=m):(g=d,c/=l);var j=i-c*g;e=i-j;var n=a.subtotal?"subtotal":"total";b[n]=f.round(e*k,4),h+=e},this),g.isEmpty(j)||this.set("tax",j),h},calcExclusiveTax:function(a){var b=[],c=0,d=0,e=0,h=a.price,i=a.rates,j=a.quantity;return g.each(i,function(a,c){return d=0,"shipping"===this.get("type")&&"no"===a.shipping?void delete i[c]:("yes"!==a.compound&&(d=h*(parseFloat(a.rate)/100)),void(b[c]=d))},this),b.length>0&&(c=b.reduce(function(a,b){return a+b})),g.each(i,function(d,g){if("yes"===d.compound){var i=h+c;b[g]=i*(parseFloat(d.rate)/100)}var k=a.subtotal?"subtotal":"total";d[k]=f.round(b[g]*j,4),e+=b[g]},this),g.isEmpty(i)||this.set("tax",i),e},quantity:function(a){var b=this.get("quantity");return this.set("quantity","increase"===a?++b:--b),this},sum:function(a){for(var b=0,c=0;c<a.length;c++)b+=this.get(a[c]);return f.round(b,4)}})},function(a,b,c){var d=c(22),e=c(51),f=c(4);a.exports=d.extend({model:e,name:"customers",indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"id",keyPath:"id",unique:!0},{name:"status",keyPath:"status",unique:!1},{name:"email",keyPath:"email",unique:!0},{name:"username",keyPath:"username",unique:!0}],initialize:function(){var a=f.request("entities","get",{type:"option",name:"customers"});a&&(this._guest=a.guest,this._default=a["default"]||a.guest)},getGuestCustomer:function(){return this._guest},getDefaultCustomer:function(){return this._default}})},function(a,b,c){var d=c(29),e=c(2),f=d.extend({name:"customer",fields:["email","username","first_name","last_name"]});a.exports=f,e.prototype.set("Entities.Customers.Model",f)},function(a,b,c){var d=c(24),e=c(53);a.exports=d.extend({model:e})},function(a,b,c){var d=c(31);a.exports=d.extend({})},function(a,b,c){var d=c(30),e=c(4),f=c(10);a.exports=d.extend({initialize:function(){this.url=e.request("entities","get",{type:"option",name:"ajaxurl"})},sync:function(a,b,c){var f=e.request("entities","get",{type:"option",name:"nonce"}),g="id="+b.get("id"),h="action=wc_pos_admin_settings",i="security="+f;return c.url=this.url+"?"+h+"&"+g+"&"+i,c.buttons&&this.updateButtonState(c),d.prototype.sync(a,b,c)},parse:function(a){return a||(a=null),a},updateButtonState:function(a){var b=a.success,c=a.error,d=a.buttons;d.trigger("state",["loading",""]),a.success=function(a,c,e){b&&b(a,c,e),d.trigger("state",["success",null])},a.error=function(a,b,e){c&&c(a,b,e);var g=null;a.status&&405===a.status&&(g=f.t("messages.legacy")+'. <a href="#tools">'+f.t("buttons.legacy")+"</a>."),!g&&a.responseJSON&&a.responseJSON.errors&&(g=a.responseJSON.errors[0].message),d.trigger("state",["error",g])}},destroy:function(a){var b=this;return this.sync("delete",this,a).then(function(a){a.id=b.id,b.clear({silent:!0}).set(a)})}})},function(a,b,c){var d=c(24),e=c(54);a.exports=d.extend({model:e})},function(a,b,c){var d=c(24),e=c(57);a.exports=d.extend({model:e,initialize:function(){this._isNew=!1,this.on("change:active",this.onChangeActive)},onChangeActive:function(a,b){b&&this.each(function(b){a.id!==b.id&&b.set({active:!1})})}})},function(a,b,c){var d=c(31);a.exports=d.extend({idAttribute:"method_id",defaults:{active:!1}})},function(a,b,c){var d=c(20),e=c(16),f=c(59),g=c(66),h=c(6),i=c(5),j=c(4).channel("global");a.exports=d.extend({channelName:"modal",initialize:function(a){this.container=a.container,this.start()},onStart:function(){this.channel.reply({open:this.open,close:this.close,alert:this.alert,confirm:this.confirm,prompt:this.prompt},this),this.layout=new f,this.container.show(this.layout),this.channel.reply({update:this.layout.update},this.layout),j.on({error:this.error},this),this.listenTo(e.history,{route:this.onRoute})},onStop:function(){delete this.layout,this.container.reset(),this.channel.reset()},onRoute:function(){this.fragment!==e.history.fragment&&this.close()},open:function(a){var b=this;return this.fragment=e.history.fragment,this.close().then(function(){return b.isOpen=!0,b.layout.open(a)})},close:function(){return this.isOpen?(this.isOpen=!1,this.layout.close()):h.Deferred().resolve()},error:function(a){a=a||{},a.jqXHR&&this.parseXHR(a);var b=new g({className:"error",title:a.status,message:a.message,raw:a.raw});this.open(b)},parseXHR:function(a){i.isObject(a.thrownError)?(a.status=a.thrownError.name,a.message=a.thrownError.message):(a.status=a.jqXHR.statusText,a.jqXHR.responseJSON&&a.jqXHR.responseJSON.errors[0]&&(a.message=a.jqXHR.responseJSON.errors[0].message)),a.raw=a.jqXHR.responseText}})},function(a,b,c){var d=c(18),e=c(60),f=c(5),g=c(6),h=c(7),i=c(63),j=c(4),k=c(13)("modalLayout"),l=c(2);c(64),a.exports=d.extend({template:h.compile(i),className:function(){return l.prototype.namespace("modal")},attributes:{tabindex:-1,role:"dialog"},buttons:[{type:"message"},{action:"save",icon:"prepend",className:"btn-primary"}],regions:{header:".modal-header",content:".modal-body",footer:".modal-footer"},initialize:function(){this.$el.modal({show:!1,backdrop:"static"})},events:{'click [data-action="close"]':function(a){a.preventDefault(),j.request("modal","close")}},triggers:{"show.bs.modal":{preventDefault:!1,event:"before:open"},"shown.bs.modal":{preventDefault:!1,event:"open"},"hide.bs.modal":{preventDefault:!1,event:"before:close"},"hidden.bs.modal":{preventDefault:!1,event:"close"}},open:function(a){var b=g.Deferred();return this.once("open",b.resolve),this.setup(a),this.content.show(a),this.$el.modal("show"),b},close:function(){var a=g.Deferred();return this.once("close",function(){this.tearDown(),a.resolve()}),this.$el.modal("hide"),a},setup:function(a){var b=a.modal||{};f.defaults(b,{header:{},footer:{}}),f.each(b,function(a,b){var c=g.camelCase("modal-"+b);this[c]?this[c](a):k("no method matching "+c)},this)},tearDown:function(){this.header.empty(),this.content.empty(),this.footer.empty(),this.$(".modal-dialog").removeClass().addClass("modal-dialog")},update:function(a){a=a||{},f.each(a,function(a,b){this[b].currentView.triggerMethod("Update",a)},this)},modalHeader:function(a){var b=new e(a);this.header.show(b)},modalFooter:function(a){a.buttons=a.buttons||this.buttons;var b=j.request("buttons","view",a);this.footer.show(b)},modalTitle:function(a){this.$(".modal-header h1").html(a)},modalClassName:function(a){a&&this.$(".modal-dialog").addClass(a)},getButtons:function(){return this.getRegion("footer").currentView}})},function(a,b,c){var d=c(61),e=c(7),f=c(62),g=c(5),h=c(10);a.exports=d.extend({template:e.compile(f),initialize:function(a){a=a||{};var b={title:h.t("messages.loading"),close:h.t("buttons.close")};this.data=g.defaults(a,b)},templateHelpers:function(){return this.data.iconPrefix=window.adminpage?"wc_pos-icon":"icon",this.data},onUpdate:function(a){g.extend(this.data,a),this.render()}})},function(a,b,c){var d=c(3),e=c(2);a.exports=e.prototype.ItemView=d.ItemView},function(a,b){a.exports='<h4 class="{{namespace \'modal-title\'}} modal-title">\n  {{{title}}}\n</h4>\n<a class="{{namespace \'btn\'}} close" data-action="close">\n  <i class="{{namespace \'icon-times\'}}" title="{{close}}"></i>\n</a>'},function(a,b){a.exports="<div class=\"{{namespace 'modal-dialog'}} modal-dialog\">\n  <div class=\"{{namespace 'modal-content'}} modal-content\">\n    <div class=\"{{namespace 'modal-header'}} modal-header\"></div>\n    <div class=\"{{namespace 'modal-body'}} modal-body\"></div>\n    <div class=\"{{namespace 'modal-footer'}} modal-footer\"></div>\n  </div>\n</div>"},function(a,b,c){var d,e,f;!function(g,h){e=[b,a,c(65)],d=h,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=d(c),h=function(a){var b="modal",c="4.0.0",d="bs.modal",h="."+d,i=".data-api",j=a.fn[b],k=300,l=150,m={backdrop:!0,keyboard:!0,focus:!0,show:!0},n={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},o={HIDE:"hide"+h,HIDDEN:"hidden"+h,SHOW:"show"+h,SHOWN:"shown"+h,FOCUSIN:"focusin"+h,RESIZE:"resize"+h,CLICK_DISMISS:"click.dismiss"+h,KEYDOWN_DISMISS:"keydown.dismiss"+h,MOUSEUP_DISMISS:"mouseup.dismiss"+h,MOUSEDOWN_DISMISS:"mousedown.dismiss"+h,CLICK_DATA_API:"click"+h+i},p={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in"},q={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".navbar-fixed-top, .navbar-fixed-bottom, .is-fixed"},r=function(){function i(b,c){e(this,i),this._config=this._getConfig(c),this._element=b,this._dialog=a(b).find(q.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return f(i,[{key:"toggle",value:function(a){return this._isShown?this.hide():this.show(a)}},{key:"show",value:function(b){var c=this,d=a.Event(o.SHOW,{relatedTarget:b});a(this._element).trigger(d),this._isShown||d.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),a(document.body).addClass(p.OPEN),this._setEscapeEvent(),this._setResizeEvent(),a(this._element).on(o.CLICK_DISMISS,q.DATA_DISMISS,a.proxy(this.hide,this)),a(this._dialog).on(o.MOUSEDOWN_DISMISS,function(){a(c._element).one(o.MOUSEUP_DISMISS,function(b){a(b.target).is(c._element)&&(that._ignoreBackdropClick=!0)})}),this._showBackdrop(a.proxy(this._showElement,this,b)))}},{key:"hide",value:function(b){b&&b.preventDefault();var c=a.Event(o.HIDE);a(this._element).trigger(c),this._isShown&&!c.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),a(document).off(o.FOCUSIN),a(this._element).removeClass(p.IN),a(this._element).off(o.CLICK_DISMISS),a(this._dialog).off(o.MOUSEDOWN_DISMISS),g["default"].supportsTransitionEnd()&&a(this._element).hasClass(p.FADE)?a(this._element).one(g["default"].TRANSITION_END,a.proxy(this._hideModal,this)).emulateTransitionEnd(k):this._hideModal())}},{key:"dispose",value:function(){a.removeData(this._element,d),a(window).off(h),a(document).off(h),a(this._element).off(h),a(this._backdrop).off(h),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null}},{key:"_getConfig",value:function(c){return c=a.extend({},m,c),g["default"].typeCheckConfig(b,c,n),c}},{key:"_showElement",value:function(b){var c=this,d=g["default"].supportsTransitionEnd()&&a(this._element).hasClass(p.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.scrollTop=0,d&&g["default"].reflow(this._element),a(this._element).addClass(p.IN),this._config.focus&&this._enforceFocus();var e=a.Event(o.SHOWN,{relatedTarget:b}),f=function(){c._config.focus&&c._element.focus(),a(c._element).trigger(e)};d?a(this._dialog).one(g["default"].TRANSITION_END,f).emulateTransitionEnd(k):f()}},{key:"_enforceFocus",value:function(){var b=this;a(document).off(o.FOCUSIN).on(o.FOCUSIN,function(c){b._element===c.target||a(b._element).has(c.target).length||b._element.focus()})}},{key:"_setEscapeEvent",value:function(){var b=this;this._isShown&&this._config.keyboard?a(this._element).on(o.KEYDOWN_DISMISS,function(a){27===a.which&&b.hide();
}):this._isShown||a(this._element).off(o.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){this._isShown?a(window).on(o.RESIZE,a.proxy(this._handleUpdate,this)):a(window).off(o.RESIZE)}},{key:"_hideModal",value:function(){var b=this;this._element.style.display="none",this._showBackdrop(function(){a(document.body).removeClass(p.OPEN),b._resetAdjustments(),b._resetScrollbar(),a(b._element).trigger(o.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&(a(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(b){var c=this,d=a(this._element).hasClass(p.FADE)?p.FADE:"";if(this._isShown&&this._config.backdrop){var e=g["default"].supportsTransitionEnd()&&d;if(this._backdrop=document.createElement("div"),this._backdrop.className=p.BACKDROP,d&&a(this._backdrop).addClass(d),a(this._backdrop).appendTo(document.body),a(this._element).on(o.CLICK_DISMISS,function(a){return c._ignoreBackdropClick?void(c._ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"===c._config.backdrop?c._element.focus():c.hide()))}),e&&g["default"].reflow(this._backdrop),a(this._backdrop).addClass(p.IN),!b)return;if(!e)return void b();a(this._backdrop).one(g["default"].TRANSITION_END,b).emulateTransitionEnd(l)}else if(!this._isShown&&this._backdrop){a(this._backdrop).removeClass(p.IN);var f=function(){c._removeBackdrop(),b&&b()};g["default"].supportsTransitionEnd()&&a(this._element).hasClass(p.FADE)?a(this._backdrop).one(g["default"].TRANSITION_END,f).emulateTransitionEnd(l):f()}else b&&b()}},{key:"_handleUpdate",value:function(){this._adjustDialog()}},{key:"_adjustDialog",value:function(){var a=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&a&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!a&&(this._element.style.paddingRight=this._scrollbarWidth+"px~")}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this._isBodyOverflowing=document.body.clientWidth<a,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var b=parseInt(a(q.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=b+this._scrollbarWidth+"px")}},{key:"_resetScrollbar",value:function(){document.body.style.paddingRight=this._originalBodyPadding}},{key:"_getScrollbarWidth",value:function(){var a=document.createElement("div");a.className=p.SCROLLBAR_MEASURER,document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b}}],[{key:"_jQueryInterface",value:function(b,c){return this.each(function(){var e=a(this).data(d),f=a.extend({},i.Default,a(this).data(),"object"==typeof b&&b);if(e||(e=new i(this,f),a(this).data(d,e)),"string"==typeof b){if(void 0===e[b])throw new Error('No method named "'+b+'"');e[b](c)}else f.show&&e.show(c)})}},{key:"VERSION",get:function(){return c}},{key:"Default",get:function(){return m}}]),i}();return a(document).on(o.CLICK_DATA_API,q.DATA_TOGGLE,function(b){var c=this,e=void 0,f=g["default"].getSelectorFromElement(this);f&&(e=a(f)[0]);var h=a(e).data(d)?"toggle":a.extend({},a(e).data(),a(this).data());"A"===this.tagName&&b.preventDefault();var i=a(e).one(o.SHOW,function(b){b.isDefaultPrevented()||i.one(o.HIDDEN,function(){a(c).is(":visible")&&c.focus()})});r._jQueryInterface.call(a(e),h,this)}),a.fn[b]=r._jQueryInterface,a.fn[b].Constructor=r,a.fn[b].noConflict=function(){return a.fn[b]=j,r._jQueryInterface},r}(jQuery);b.exports=h})},function(a,b,c){var d,e,f;!function(c,g){e=[b,a],d=g,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(this,function(a,b){"use strict";var c=function(a){function b(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function c(a){return(a[0]||a).nodeType}function d(){return{bindType:h.end,delegateType:h.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}}}function e(){if(window.QUnit)return!1;var a=document.createElement("bootstrap");for(var b in i)if(void 0!==a.style[b])return{end:i[b]};return!1}function f(b){var c=this,d=!1;return a(this).one(j.TRANSITION_END,function(){d=!0}),setTimeout(function(){d||j.triggerTransitionEnd(c)},b),this}function g(){h=e(),a.fn.emulateTransitionEnd=f,j.supportsTransitionEnd()&&(a.event.special[j.TRANSITION_END]=d())}var h=!1,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},j={TRANSITION_END:"bsTransitionEnd",getUID:function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},getSelectorFromElement:function(a){var b=a.getAttribute("data-target");return b||(b=a.getAttribute("href")||"",b=/^#[a-z]/i.test(b)?b:null),b},reflow:function(a){new Function("bs","return bs")(a.offsetHeight)},triggerTransitionEnd:function(b){a(b).trigger(h.end)},supportsTransitionEnd:function(){return Boolean(h)},typeCheckConfig:function(a,d,e){for(var f in e)if(e.hasOwnProperty(f)){var g=e[f],h=d[f],i=void 0;if(i=h&&c(h)?"element":b(h),!new RegExp(g).test(i))throw new Error(a.toUpperCase()+": "+('Option "'+f+'" provided type "'+i+'" ')+('but expected type "'+g+'".'))}}};return g(),j}(jQuery);b.exports=c})},function(a,b,c){var d=c(61),e=c(7),f=c(67);a.exports=d.extend({template:e.compile(f),initialize:function(a){a=a||{},this.message=a.message,this.raw=a.raw,this.modal={className:a.className,header:{title:a.title},footer:{buttons:[{action:"close"}]}}},templateHelpers:function(){var a={};return a.message=this.message,a.raw=this.raw,a},ui:{raw:'*[data-action="raw"]',output:".raw-output"},events:{"click @ui.raw":"toggleRaw"},toggleRaw:function(a){a.preventDefault(),this.ui.output.toggle()}})},function(a,b){a.exports='<p>\n  {{message}}\n  {{#if raw}}\n    <a href="#" data-action="raw"><i class="{{namespace \'icon-info-circle\'}}"></i></a>\n  {{/if}}\n<p>\n{{#if raw}}\n  <div class="raw-output" style="display:none">{{{raw}}}</div>\n{{/if}}'},function(a,b,c){var d=c(20),e=c(69),f=c(73);a.exports=d.extend({channelName:"tabs",initialize:function(){this.channel.reply({view:this.tabsView},this)},tabsView:function(a){return a=a||{},new e({collection:this.tabsCollection(a)})},tabsCollection:function(a){return new f(a.tabs)}})},function(a,b,c){var d=c(70),e=c(71),f=d.extend({tagName:"ul",childView:e,attributes:{"class":"tabs",role:"tablist"},setActive:function(a){var b=this.collection.get(a);b.set({active:!0})},setLabel:function(a){a=a||{};var b=this.collection.get(a.tab);b.set({label:a.label})},onShow:function(){this.collection.ensureActiveTab()}});a.exports=f},function(a,b,c){var d=c(3),e=c(2);a.exports=e.prototype.CollectionView=d.CollectionView.extend({})},function(a,b,c){var d=c(7),e=c(61),f=c(72),g=e.extend({tagName:"li",template:d.compile(f),className:function(){return this.model.get("active")?"active":void 0},modelEvents:{"change:active":"toggleActive","change:label":"render"},toggleActive:function(){this.$el.toggleClass("active",this.model.get("active"))},triggers:{click:"tab:clicked",'click *[data-action="remove"]':"remove:tab"},onTabClicked:function(){this.model.set({active:!0})},onRemoveTab:function(){this.model.collection.remove(this.model)}});a.exports=g},function(a,b){a.exports='{{#unless fixed}}\n<a href="#" data-action="remove">\n  <i class="icon icon-times-circle"></i>\n</a>\n{{/unless}}\n{{{ label }}}'},function(a,b,c){var d=c(24),e=c(74),f=d.extend({model:e,initialize:function(){this.on({"change:active":this.onChangeActive,remove:this.ensureActiveTab})},onChangeActive:function(a,b){b&&(this.each(function(b){b.set({active:b===a})}),this.trigger("active:tab",a))},ensureActiveTab:function(){var a=this.where({active:!0});this.length>0&&0===a.length&&this.at(0).set({active:!0})}});a.exports=f},function(a,b,c){var d=c(31),e=d.extend({defaults:{id:"",label:"Tab",active:!1,fixed:!0}});a.exports=e},function(a,b,c){var d=c(20),e=c(76);a.exports=d.extend({channelName:"buttons",initialize:function(){this.channel.reply({view:this.view},this)},view:function(a){var b=new e(a);return b}})},function(a,b,c){var d=c(61),e=c(7),f=c(5),g=c(77),h=c(10),i=c(78);a.exports=d.extend({viewOptions:["buttons"],buttons:[{action:"save",className:"btn-primary"}],template:e.compile(g),initialize:function(a){this.mergeOptions(a,this.viewOptions)},templateHelpers:function(){return f.each(this.buttons,function(a){var b=a.type||"button";a[b]=!0,a.label=a.label||h.t("buttons."+a.action)}),{buttons:this.buttons}},behaviors:{Buttons:{behaviorClass:i}}})},function(a,b){a.exports='{{#each buttons}}\n\n  {{#if this.button}}\n    <button class="btn {{this.className}}"\n            {{#if this.action}}data-action="{{this.action}}"{{/if}}\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\n      {{#if this.icon}}data-icon="{{this.icon}}"{{/if}}\n      {{#if this.disabled}}disabled{{/if}}\n      >\n      {{this.label}}\n    </button>\n  {{/if}}\n\n  {{#if this.link}}\n    <a href="#" class="btn {{this.className}}"\n       {{#if this.action}}data-action="{{this.action}}"{{/if}}\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\n      {{#if this.icon}}data-icon="{{this.icon}}"{{/if}}\n      >\n      {{this.label}}\n    </a>\n  {{/if}}\n\n  {{#if this.input}}\n    <input type="button" class="btn {{this.className}}" value="{{this.label}}"\n           {{#if this.action}}data-action="{{this.action}}"{{/if}}\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\n      >\n  {{/if}}\n\n  {{#if this.message}}\n    <p class="message {{this.className}}"></p>\n  {{/if}}\n\n{{/each}}'},function(a,b,c){var d=c(79),e=c(2),f=c(6),g=c(10),h="disabled",i=d.extend({loadingText:g.t("messages.loading"),ui:{btns:".btn",action:"[data-action]",toggle:"[data-toggle]",message:".message"},events:{"click @ui.action":"action","click @ui.toggle":"toggle","state @ui.btns":"setState"},namespace:function(a){return window.adminpage&&(a="wc_pos-"+a),a},action:function(a){a.preventDefault();var b=f(a.target).data("action");this.view.trigger("action:"+b,f(a.target),this.view,b)},toggle:function(a){a.preventDefault(),this.enable().disable(f(a.target));var b=f(a.target).data("toggle");this.view.trigger("toggle:"+b,f(a.target),this.view,b)},enable:function(a){return a?a.removeClass(h).prop(h,!1):this.ui.btns.each(function(){f(this).removeClass(h).prop(h,!1)}),this},disable:function(a){return a?a.addClass(h).prop(h,!0):this.ui.btns.each(function(){f(this).addClass(h).prop(h,!0)}),this},setState:function(a,b,c){var d=f(a.target),e="loading"===b?"disable":"enable";this[e](),this.updateText(d),d.is("input")?this.updateInput(d,b):this.updateIcon(d,b),void 0!==c&&this.updateMessage(c,b)},updateText:function(a){if(void 0!==a.data("loading")){var b=a.is("input")?"val":"html",c=a[b](),d=a.data("loading")||this.loadingText;a.data("loading",c),a[b](d)}},updateIcon:function(a,b){if(void 0!==a.data("icon")){var c=a.data("icon")||"prepend",d="reset"!==b?this.icon(b):"";a.children("i").remove(),a[c](d)}},icon:function(a){return'<i class="'+this.namespace("icon-"+a)+'"></i>'},updateInput:function(a,b){a.removeClass("loading success error"),"reset"!==b&&a.addClass(b)},updateMessage:function(a,b){null===a&&(a=g.t("messages."+b)),b||(b=a,a=g.t("messages."+a)),"reset"===b&&(a=""),this.ui.message.removeClass("loading success error").addClass(this.namespace("text-"+b)).html(a)},onMessage:function(a,b){this.updateMessage(a,b)},onDisableButtons:function(){this.disable()},onEnableButtons:function(){this.enable()}});a.exports=i,e.prototype.set("Behaviors.Buttons",i)},function(a,b,c){var d=c(3),e=c(2);a.exports=e.prototype.Behavior=d.Behavior},function(a,b,c){var d=c(2),e=c(81),f=c(85),g=c(86),h=c(96),i=c(100),j=c(102),k=c(104),l=c(109),m=c(16),n=m.Radio,o=c(5),p=e.extend({initialize:function(a){this.container=a.container,this.collection=n.request("entities","get",{type:"collection",name:"settings"})},onBeforeEnter:function(){this.layout=new f,this.listenTo(this.layout,"show",this.showTabs),this.container.show(this.layout)},routes:{"":"showGeneral",general:"showGeneral",checkout:"showCheckout",hotkeys:"showHotkeys",access:"showAccess",tools:"showTools",status:"showStatus"},onBeforeRoute:function(){this.layout.getRegion("footer").empty()},showTabs:function(){var a=m.history.getHash()||"general",b=o.findWhere(this.tabsArray,{id:a});b&&(b.active=!0);var c=n.request("tabs","view",{tabs:this.tabsArray});this.listenTo(c,"show",function(){c.$el.addClass("nav-tab-wrapper"),c.children.each(function(a){a.$el.addClass("nav-tab")})}),this.listenTo(c.collection,"change:active",function(a,b){b&&this.navigate(a.id,{trigger:!0,replace:!0})}),this.layout.getRegion("tabs").show(c)},showGeneral:function(){var a=this.collection.get("general");return this.showFooter({model:a}),new g({container:this.layout.getRegion("settings"),model:a})},showCheckout:function(){var a=this.collection.get("checkout");return this.showFooter({model:a}),new h({container:this.layout.getRegion("settings"),model:a})},showHotkeys:function(){var a=this.collection.get("hotkeys");return this.showFooter({model:a}),new i({container:this.layout.getRegion("settings"),model:a})},showAccess:function(){var a=this.collection.get("access");return this.showFooter({model:a}),new j({container:this.layout.getRegion("settings"),model:a})},showTools:function(){return new k({container:this.layout.getRegion("settings")})},showStatus:function(){return new l({container:this.layout.getRegion("settings")})},showFooter:function(a){o.defaults(a,{buttons:[{action:"save",className:"button-primary",icon:"append"},{type:"message"},{action:"restore",className:"button-secondary alignright",icon:"prepend"}]});var b=n.request("buttons","view",a);this.listenTo(b,{"action:save":function(b){a.model.save([],{buttons:b})},"action:restore":function(b){a.model.destroy({buttons:b})}}),this.layout.getRegion("footer").show(b)}});a.exports=p,d.prototype.set("SettingsApp.Router",p)},function(a,b,c){var d=c(16),e=c(3),f=c(6),g=c(5),h=c(82),i=c(2);a.exports=i.prototype.Router=e.AppRouter.extend({constructor:function(){this.channel=d.Radio.channel("router"),this.on("all",this._onRouterEvent),this.listenTo(d.history,"route",this._onHistoryRoute),e.AppRouter.apply(this,arguments)},_onRouterEvent:function(a){var b=g.toArray(arguments).slice(1);this.channel.trigger.apply(this.channel,[a,this].concat(b))},_onHistoryRoute:function(a){this===a?this.active=!0:(this.active=!1,this._currentRoute=void 0)},execute:function(a,b){var c=this;this.active||this.triggerMethod.apply(this,["before:enter"].concat(b)),this.triggerMethod.apply(this,["before:route"].concat(b)),f.when(this._execute(a,b)).then(function(){c.active||c.triggerMethod.apply(c,["enter"].concat(b)),c.triggerMethod.apply(c,["route"].concat(b))})},_execute:function(a,b){var c=a.apply(this,b);return this._currentRoute=c,c instanceof h?(c.router=this,c.enter(b)):void 0},triggerMethod:e.triggerMethod})},function(a,b,c){var d=c(16),e=c(3),f=c(6),g=c(5),h=c(2),i=c(83),j=c(4),k=j.channel("global");a.exports=h.prototype.Route=e.Object.extend({constructor:function(){this.initialize.apply(this,arguments)},_triggerMethod:function(a,b){this.router&&this.router.triggerMethod.apply(this.router,[a+":route"].concat(b)),this.triggerMethod.apply(this,[a].concat(b))},enter:function(a){var b=this;return this.transitioning=!0,this._triggerMethod("before:enter",a),this._triggerMethod("before:fetch",a),g.defer(function(){b.transitioning&&(b.loading=new i({container:b.container}))}),f.when(this.fetch.call(this,a)).then(function(){b._triggerMethod("fetch",a),b._triggerMethod("before:render",a)}).then(function(){return b.transitioning=!1,b.render.apply(b,a)}).then(function(){b._triggerMethod("render",a),b._triggerMethod("enter",a)}).fail(function(){b._triggerMethod("error",a)})},navigate:function(){d.history.navigate.apply(d.history,arguments)},fetch:function(){},render:function(){},setTabLabel:function(a){k.trigger("tab:label",a)}})},function(a,b,c){var d=c(20),e=c(84),f=c(5),g=c(13)("loading");a.exports=d.extend({channelName:"loading",initialize:function(a){f.defaults(a,{type:"spinner",message:""}),a.container&&this[a.type]?this[a.type](a):g("invalid loading options",a)},spinner:function(a){var b=new e({message:a.message});a.container.show(b)},opacity:function(a){a.container.currentView.$el.css({opacity:.5})}})},function(a,b,c){var d=c(61),e=c(5),f=c(2),g=d.extend({className:"loading",iconPrefix:"icon-",initialize:function(){this.on("update:message",this.render),this.timeout=setTimeout(e.bind(this.fail,this),6e4),window.adminpage&&(this.iconPrefix="wc_pos-icon-")},render:function(){var a="";return e.isEmpty(this.options.message)||(a="<p>"+this.options.message+"</p>"),this.$el.html("<p>"+this.icon()+"</p>"+a),this},onBeforeDestroy:function(){clearTimeout(this.timeout)},fail:function(a){a?this.options.message=a:this.options.message="Script Error",this.render(),this.$("i").removeClass("icon-spinner").addClass("icon-fail")},icon:function(){return'<i class="'+this.iconPrefix+"spinner "+this.iconPrefix+'lg"></i>'}});a.exports=g,f.prototype.set("Components.Loading.View",g)},function(a,b,c){var d=c(18),e=c(2),f=d.extend({template:function(){return'<div id="wc_pos-settings-tabs"></div><div id="wc_pos-settings"></div><div id="wc_pos-settings-footer"></div>'},regions:{tabs:"#wc_pos-settings-tabs",settings:"#wc_pos-settings",footer:"#wc_pos-settings-footer"}});a.exports=f,e.prototype.set("SettingsApp.LayoutView",f)},function(a,b,c){var d=c(82),e=c(2),f=c(87),g=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},fetch:function(){return this.model&&this.model.isNew()?this.model.fetch():void 0},render:function(){var a=new f({model:this.model});this.container.show(a)}});a.exports=g,e.prototype.set("SettingsApp.General.Route",g)},function(a,b,c){var d=c(88),e=c(6),f=c(2),g=c(92),h=c(93),i=d.extend({template:"general",attributes:{id:"wc_pos-settings-general"},behaviors:{Tooltip:{behaviorClass:h},CustomerSelect:{behaviorClass:g}},select2:{discount_quick_keys:{maximumSelectionLength:4}},modelEvents:{"change:id":"render","change:logged_in_user":function(a,b){this.ui.customerSelect.prop("disabled",b)}},ui:{customerSelect:'select[data-select="customer"]'},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.model.get("logged_in_user")&&this.ui.customerSelect.prop("disabled",!0)}});a.exports=i,f.prototype.set("SettingsApp.General.View",i)},function(a,b,c){var d=c(61),e=c(16),f=c(2);c(89),c(90),c(91),a.exports=f.prototype.FormView=d.extend({constructor:function(){return d.prototype.constructor.apply(this,arguments)},bindings:{},render:function(){var a=Array.prototype.slice.apply(arguments),b=d.prototype.render.apply(this,a);return e.Validation.bind(this,{model:this.model,valid:function(a,b){a.$('input[name="'+b+'"]').removeClass("form-control-error").parent().removeClass("has-error")},invalid:function(a,b){a.$('input[name="'+b+'"]').addClass("form-control-error").parent().addClass("has-error")}}),this.stickit(),b},remove:function(){return e.Validation.unbind(this),d.prototype.remove.apply(this,arguments)}})},function(a,b,c){var d,e,f;!function(g){e=[c(5),c(16),b],d=g,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(function(a,b,c){b.Stickit=c,c._handlers=[],c.addHandler=function(b){b=a.map(a.flatten([b]),function(b){return a.defaults({},b,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(b)},c.ViewMixin={_modelBindings:null,unstickit:function(b,c){if(a.isObject(c))return void a.each(c,function(a,c){this.unstickit(b,c)},this);var d=[],e=[];this._modelBindings=a.reject(this._modelBindings,function(a){return b&&a.model!==b||c&&a.config.selector!=c?void 0:(a.model.off(a.event,a.fn),e.push(a.config._destroy),d.push(a.model),!0)}),a.invoke(a.uniq(d),"trigger","stickit:unstuck",this.cid),a.each(a.uniq(e),function(a){a.call(this)},this),this.$el.off(".stickit"+(b?"."+b.cid:""),c)},stickit:function(b,c){var d=b||this.model,e=c||a.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(d,e);var f=this.remove;return f.stickitWrapped||(this.remove=function(){var a=this;return this.unstickit(),f&&(a=f.apply(this,arguments)),a}),this.remove.stickitWrapped=!0,this},addBinding:function(b,c,e){var p=b||this.model,q=".stickit."+p.cid;if(e=e||{},a.isObject(c)){var r=c;return void a.each(r,function(a,b){this.addBinding(p,b,a)},this)}var s=":el"===c?this.$el:this.$(c);if(this.unstickit(p,c),s.length){a.isString(e)&&(e={observe:e}),a.isFunction(e.observe)&&(e.observe=e.observe.call(this));var t=k(s,e),u=t.observe;t.selector=c,t.view=this;var v=t.bindId=a.uniqueId(),w=a.extend({stickitChange:t},t.setOptions);if(t._destroy=function(){f.call(this,t.destroy,s,p,t)},l(s,t,p,u),n(s,t,p,u),m(s,t,p,u),u){a.each(t.events,function(b){var e=b+q,h=function(a){var b=f.call(this,t.getVal,s,a,t,d.call(arguments,1)),c=g(t.updateModel,b,a,t);c&&i(p,u,b,w,t)},j=":el"===c?"":c;this.$el.on(e,j,a.bind(h,this))},this),a.each(a.flatten([u]),function(a){h(p,"change:"+a,t,function(a,b,c){var d=c&&c.stickitChange&&c.stickitChange.bindId;if(d!==v){var e=j(p,u,t);o(s,t,e,p)}})});var x=j(p,u,t);o(s,t,x,p,!0)}f.call(this,t.initialize,s,p,t)}}},a.extend(b.View.prototype,c.ViewMixin);var d=[].slice,e=function(b,c){var d=(c||"").split("."),e=a.reduce(d,function(a,b){return a[b]},b);return null==e?b:e},f=function(b){return b=a.isString(b)?e(this,b):b,b?b.apply(this,d.call(arguments,1)):void 0},g=function(b,c,d){if(a.isBoolean(b))return b;if(a.isFunction(b)||a.isString(b)){var e=a.last(arguments).view;return f.apply(e,arguments)}return!1},h=function(a,b,c,d){var e=c.view;a.on(b,d,e),e._modelBindings.push({model:a,event:b,fn:d,config:c})},i=function(b,c,d,e,g){var h={},i=g.view;g.onSet&&(d=f.call(i,g.onSet,d,g)),g.set?f.call(i,g.set,c,d,e,g):(h[c]=d,a.isArray(c)&&a.isArray(d)&&(h=a.reduce(c,function(b,c,e){return b[c]=a.has(d,e)?d[e]:null,b},{})),b.set(h,e))},j=function(b,c,d){var e=d.view,g=function(a){return b[d.escape?"escape":"get"](a)},h=function(a){return null==a?"":a},i=a.isArray(c)?a.map(c,g):g(c);return d.onGet&&(i=f.call(e,d.onGet,i,d)),a.isArray(i)?a.map(i,h):h(i)},k=c.getConfiguration=function(b,d){var e=[{updateModel:!1,updateMethod:"text",update:function(a,b,c,d){a[d.updateMethod]&&a[d.updateMethod](b)},getVal:function(a,b,c){return a[c.updateMethod]()}}];e=e.concat(a.filter(c._handlers,function(a){return b.is(a.selector)})),e.push(d);var f=a.extend.apply(a,e);return a.has(f,"updateView")||(f.updateView=!f.visible),f},l=function(b,c,d,e){var f=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],g=c.view;a.each(c.attributes||[],function(i){i=a.clone(i),i.view=g;var k="",l=i.observe||(i.observe=e),m=function(){var c=a.contains(f,i.name)?"prop":"attr",e=j(d,l,i);"class"===i.name?(b.removeClass(k).addClass(e),k=e):b[c](i.name,e)};a.each(a.flatten([l]),function(a){h(d,"change:"+a,c,m)}),m()})},m=function(b,c,d,e){a.each(c.classes||[],function(e,f){a.isString(e)&&(e={observe:e}),e.view=c.view;var g=e.observe,i=function(){var a=j(d,g,e);b.toggleClass(f,!!a)};a.each(a.flatten([g]),function(a){h(d,"change:"+a,c,i)}),i()})},n=function(b,c,d,e){if(null!=c.visible){var g=c.view,i=function(){var h=c.visible,i=c.visibleFn,k=j(d,e,c),l=!!k;(a.isFunction(h)||a.isString(h))&&(l=!!f.call(g,h,k,c)),i?f.call(g,i,b,l,c):b.toggle(l)};a.each(a.flatten([e]),function(a){h(d,"change:"+a,c,i)}),i()}},o=function(a,b,c,d,e){var h=b.view;g(b.updateView,c,b)&&(f.call(h,b.update,a,c,d,b),e||f.call(h,b.afterUpdate,a,c,b))};return c.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:'input[type="radio"]',events:["change"],update:function(a,b){a.filter('[value="'+b+'"]').prop("checked",!0)},getVal:function(a){return a.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(c,d,e,f){if(c.length>1)d||(d=[]),c.each(function(c,e){var f=b.$(e),g=a.contains(d,f.val());f.prop("checked",g)});else{var g=a.isBoolean(d)?d:d===c.val();c.prop("checked",g)}},getVal:function(c){var d;if(c.length>1)d=a.reduce(c,function(a,c){var d=b.$(c);return d.prop("checked")&&a.push(d.val()),a},[]);else{d=c.prop("checked");var e=c.val();"on"!==e&&null!=e&&(d=d?c.val():null)}return d}},{selector:"select",events:["change"],update:function(c,d,g,h){var i,k=h.selectOptions,l=k&&k.collection||void 0,m=c.prop("multiple");if(!k){k={};var n=function(a){return a.map(function(a,c){var d=b.$(c).data("stickit-bind-val");return{value:void 0!==d?d:c.value,label:c.text}}).get()};c.find("optgroup").length?(l={opt_labels:[]},c.find("> option").length&&(l.opt_labels.push(void 0),a.each(c.find("> option"),function(a){l[void 0]=n(b.$(a))})),a.each(c.find("optgroup"),function(a){var c=b.$(a).attr("label");l.opt_labels.push(c),l[c]=n(b.$(a).find("option"))})):l=n(c.find("option"))}k.valuePath=k.valuePath||"value",k.labelPath=k.labelPath||"label",k.disabledPath=k.disabledPath||"disabled";var o=function(c,d,f){a.each(c,function(c){var g,h,i,j=b.$("<option/>"),l=c,n=function(b,c,d){j.text(b),l=c,j.data("stickit-bind-val",l),a.isArray(l)||a.isObject(l)||j.val(l),d===!0&&j.prop("disabled","disabled")};"__default__"===c?(g=f.label,h=f.value,i=f.disabled):(g=e(c,k.labelPath),h=e(c,k.valuePath),i=e(c,k.disabledPath)),n(g,h,i);var o=function(){return m||null==l||null==f||l!==f?a.isObject(f)&&a.isEqual(l,f)?!0:!1:!0};o()?j.prop("selected",!0):m&&a.isArray(f)&&a.each(f,function(b){a.isObject(b)&&(b=e(b,k.valuePath)),(b===l||a.isObject(b)&&a.isEqual(l,b))&&j.prop("selected",!0)}),d.append(j)})};if(c.find("*").remove(),a.isString(l)){var p=window;0===l.indexOf("this.")&&(p=this),l=l.replace(/^[a-z]*\.(.+)$/,"$1"),i=e(p,l)}else i=a.isFunction(l)?f.call(this,l,c,h):l;if(i instanceof b.Collection){var q=i,r=function(){var a=j(g,h.observe,h);f.call(this,h.update,c,a,g,h)},s=function(){q.off("add remove reset sort",r)},t=function(){s(),q.off("stickit:selectRefresh"),g.off("stickit:selectRefresh")};q.trigger("stickit:selectRefresh"),q.once("stickit:selectRefresh",s,this),q.on("add remove reset sort",r,this),g.trigger("stickit:selectRefresh"),g.once("stickit:selectRefresh",function(){g.off("stickit:unstuck",t)}),g.once("stickit:unstuck",t,this),i=i.toJSON()}if(k.defaultOption){var u=a.isFunction(k.defaultOption)?k.defaultOption.call(this,c,h):k.defaultOption;o(["__default__"],c,u)}if(a.isArray(i))o(i,c,d);else if(i.opt_labels)a.each(i.opt_labels,function(a){var e=b.$("<optgroup/>").attr("label",a);o(i[a],e,d),c.append(e)});else{var v,w=[];for(var x in i)v={},v[k.valuePath]=x,v[k.labelPath]=i[x],w.push(v);w=a.sortBy(w,k.comparator||k.labelPath),o(w,c,d)}},getVal:function(c){var d=c.find("option:selected");return c.prop("multiple")?a.map(d,function(a){return b.$(a).data("stickit-bind-val")}):d.data("stickit-bind-val")}}]),c})},function(a,b,c){!function(b){a.exports=b(c(16),c(5))}(function(a,b){return a.Validation=function(a){"use strict";var b={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},c={formatLabel:function(a,c){return i[b.labelFormatter](a,c)},format:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();return b.replace(/\{(\d+)\}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}},d=function(b,c,e){return c=c||{},e=e||"",a.each(b,function(f,g){b.hasOwnProperty(g)&&(f&&a.isArray(f)?a.forEach(f,function(a,b){d(a,c,e+g+"."+b+"."),c[e+g+"."+b]=a}):f&&"object"==typeof f&&f.constructor===Object&&d(f,c,e+g+"."),c[e+g]=f)}),c},e=function(){var e=function(b,c){return c=c||a.keys(a.result(b,"validation")||{}),a.reduce(c,function(a,b){return a[b]=void 0,a},{})},g=function(b,c){var d=b.attributes;return a.isFunction(d)?d=d(c):a.isString(d)&&a.isFunction(j[d])&&(d=j[d](c)),a.isArray(d)?d:void 0},h=function(b,c){var d=b.validation?a.result(b,"validation")[c]||{}:{};return(a.isFunction(d)||a.isString(d))&&(d={fn:d}),a.isArray(d)||(d=[d]),a.reduce(d,function(b,c){return a.each(a.without(a.keys(c),"msg"),function(a){b.push({fn:k[a],val:c[a],msg:c.msg})}),b},[])},i=function(b,d,e,f){return a.reduce(h(b,d),function(g,h){var i=a.extend({},c,k),j=h.fn.call(i,e,d,h.val,b,f);return j===!1||g===!1?!1:j&&!g?a.result(h,"msg")||j:g},"")},l=function(b,c,d){var e,f={},g=!0,h=a.clone(c);return a.each(d,function(a,c){e=i(b,c,a,h),e&&(f[c]=e,g=!1)}),{invalidAttrs:f,isValid:g}},m=function(b,c){return{preValidate:function(b,c){var d,e=this,f={};return a.isObject(b)?(a.each(b,function(a,b){d=e.preValidate(b,a),d&&(f[b]=d)}),a.isEmpty(f)?void 0:f):i(this,b,c,a.extend({},this.attributes))},isValid:function(e){var f,h,j,k;return e=e||g(c,b),a.isString(e)?h=[e]:a.isArray(e)&&(h=e),h&&(f=d(this.attributes),a.each(this.associatedViews,function(b){a.each(h,function(d){j=i(this,d,f[d],a.extend({},this.attributes)),j?(c.invalid(b,d,j,c.selector),k=k||{},k[d]=j):c.valid(b,d,c.selector)},this)},this)),e===!0&&(k=this.validate()),k&&this.trigger("invalid",this,k,{validationError:k}),h?!k:this.validation?this._isValid:!0},validate:function(f,h){var i=this,j=!f,k=a.extend({},c,h),m=e(i,g(c,b)),n=a.extend({},m,i.attributes,f),o=d(n),p=f?d(f):o,q=l(i,n,a.pick(o,a.keys(m)));return i._isValid=q.isValid,a.each(i.associatedViews,function(b){a.each(m,function(a,c){var d=q.invalidAttrs.hasOwnProperty(c),e=p.hasOwnProperty(c);d||k.valid(b,c,k.selector),d&&(e||j)&&k.invalid(b,c,q.invalidAttrs[c],k.selector)})}),a.defer(function(){i.trigger("validated",i._isValid,i,q.invalidAttrs),i.trigger("validated:"+(i._isValid?"valid":"invalid"),i,q.invalidAttrs)}),!k.forceUpdate&&a.intersection(a.keys(q.invalidAttrs),a.keys(p)).length>0?q.invalidAttrs:void 0}}},n=function(b,c,d){c.associatedViews?c.associatedViews.push(b):c.associatedViews=[b],a.extend(c,m(b,d))},o=function(b,c){c&&b.associatedViews&&b.associatedViews.length>1?b.associatedViews=a.without(b.associatedViews,c):(delete b.validate,delete b.preValidate,delete b.isValid,delete b.associatedViews)},p=function(a){n(this.view,a,this.options)},q=function(a){o(a)};return{version:"0.11.3",configure:function(c){a.extend(b,c)},bind:function(c,d){d=a.extend({},b,f,d);var e=d.model||c.model,g=d.collection||c.collection;if("undefined"==typeof e&&"undefined"==typeof g)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";e?n(c,e,d):g&&(g.each(function(a){n(c,a,d)}),g.bind("add",p,{view:c,options:d}),g.bind("remove",q))},unbind:function(b,c){c=a.extend({},c);var d=c.model||b.model,e=c.collection||b.collection;d?o(d,b):e&&(e.each(function(a){o(a,b)}),e.unbind("add",p),e.unbind("remove",q))},mixin:m(null,b)}}(),f=e.callbacks={valid:function(a,b,c){a.$("["+c+'~="'+b+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(a,b,c,d){a.$("["+d+'~="'+b+'"]').addClass("invalid").attr("data-error",c)}},g=e.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,
url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},h=e.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},i=e.labelFormatters={none:function(a){return a},sentenceCase:function(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return 0===b?a.toUpperCase():" "+a.toLowerCase()}).replace(/_/g," ")},label:function(a,b){return b.labels&&b.labels[a]||i.sentenceCase(a,b)}},j=e.attributeLoaders={inputNames:function(a){var b=[];return a&&a.$("form [name]").each(function(){/^(?:input|select|textarea)$/i.test(this.nodeName)&&this.name&&"submit"!==this.type&&-1===b.indexOf(this.name)&&b.push(this.name)}),b}},k=e.validators=function(){var b=String.prototype.trim?function(a){return null===a?"":String.prototype.trim.call(a)}:function(a){var b=/^\s+/,c=/\s+$/;return null===a?"":a.toString().replace(b,"").replace(c,"")},c=function(b){return a.isNumber(b)||a.isString(b)&&b.match(g.number)},d=function(c){return!(a.isNull(c)||a.isUndefined(c)||a.isString(c)&&""===b(c)||a.isArray(c)&&a.isEmpty(c))};return{fn:function(b,c,d,e,f){return a.isString(d)&&(d=e[d]),d.call(e,b,c,f)},required:function(b,c,e,f,g){var i=a.isFunction(e)?e.call(f,b,c,g):e;return i||d(b)?i&&!d(b)?this.format(h.required,this.formatLabel(c,f)):void 0:!1},acceptance:function(b,c,d,e){return"true"===b||a.isBoolean(b)&&b!==!1?void 0:this.format(h.acceptance,this.formatLabel(c,e))},min:function(a,b,d,e){return!c(a)||d>a?this.format(h.min,this.formatLabel(b,e),d):void 0},max:function(a,b,d,e){return!c(a)||a>d?this.format(h.max,this.formatLabel(b,e),d):void 0},range:function(a,b,d,e){return!c(a)||a<d[0]||a>d[1]?this.format(h.range,this.formatLabel(b,e),d[0],d[1]):void 0},length:function(b,c,d,e){return a.isString(b)&&b.length===d?void 0:this.format(h.length,this.formatLabel(c,e),d)},minLength:function(b,c,d,e){return!a.isString(b)||b.length<d?this.format(h.minLength,this.formatLabel(c,e),d):void 0},maxLength:function(b,c,d,e){return!a.isString(b)||b.length>d?this.format(h.maxLength,this.formatLabel(c,e),d):void 0},rangeLength:function(b,c,d,e){return!a.isString(b)||b.length<d[0]||b.length>d[1]?this.format(h.rangeLength,this.formatLabel(c,e),d[0],d[1]):void 0},oneOf:function(b,c,d,e){return a.include(d,b)?void 0:this.format(h.oneOf,this.formatLabel(c,e),d.join(", "))},equalTo:function(a,b,c,d,e){return a!==e[c]?this.format(h.equalTo,this.formatLabel(b,d),this.formatLabel(c,d)):void 0},pattern:function(a,b,c,e){return d(a)&&a.toString().match(g[c]||c)?void 0:this.format(h[c]||h.inlinePattern,this.formatLabel(b,e),c)}}}();return a.each(k,function(b,d){k[d]=a.bind(k[d],a.extend({},c,k))}),e}(b),a.Validation})},function(a,b,c){var d=c(16),e=c(5);d.Stickit.addHandler({selector:".autogrow",afterUpdate:function(a){a.trigger("input")}}),d.Stickit.addHandler({selector:"select.select2",initialize:function(a,b,c){a.trigger("stickit:init",c.observe);var d=e.get(c,["view","select2",c.observe],{});a.select2(d)},getVal:function(a){return a.val()}}),d.Stickit.addHandler({selector:"select[multiple].select2",onSet:function(a,b){return e.isArray(a)&&this.model.unset(b.observe,{silent:!0}),a}})},function(a,b,c){var d=c(79),e=c(2),f=c(4),g=c(5),h=c(6),i=c(7),j=d.extend({initialize:function(){var a=f.request("entities","get",{type:"option",name:"customers"});a.ajaxurl=f.request("entities","get",{type:"option",name:"ajaxurl"}),a.wc_nonce=f.request("entities","get",{type:"option",name:"search_customers_nonce"}),this.mergeOptions(a,["guest","default","ajaxurl","wc_nonce"])},ui:{select:'select[data-select="customer"]'},events:{"stickit:init @ui.select":function(a,b){var c=this.getOption("ajaxurl"),d=this.getOption("wc_nonce"),e=this.getOption("guest");this.view.select2=this.view.select2||{},this.view.select2[b]={minimumInputLength:3,ajax:{url:c,dataType:"json",delay:250,data:function(a){return{term:a.term,action:"woocommerce_json_search_customers",security:d}},processResults:function(a){var b=[];return a&&h.each(a,function(a,c){b.push({id:a,text:c})}),b.unshift({id:"0",text:e.first_name}),{results:b}},cache:!0},escapeMarkup:function(a){return a}}}},onRender:function(){g.isEmpty(this.ui.select.data("placeholder"))&&this.initSelection()},initSelection:function(){var a=this.getOption("default")||this.getOption("guest"),b=i.helpers.formatCustomerName(a);this.ui.select.html(h("<option />").val(a.id).text(b)).trigger("change")}});a.exports=j,e.prototype.set("Behaviors.CustomerSelect",j)},function(a,b,c){var d=c(79),e=c(2),f=c(5),g=c(6),h=c(94),e=c(2),i=e.prototype.namespace("tooltip"),j=h.createContext({classPrefix:i}),k={position:"top center",openOn:"hover",classes:i+"-theme-arrows",constrainToWindow:!0,constrainToScrollParent:!1,remove:!0},l=d.extend({_initialized:[],initialize:function(a){this.options=f.extend({},k,a),this.ui={tooltip:'*[data-toggle="'+i+'"]'}},events:{"mouseenter @ui.tooltip":"onHover"},onHover:function(a){if(-1===this._initialized.indexOf(a.target)){var b=f.extend({},this.options,{target:a.target,content:g(a.target).attr("title")}),c=new j(b);this._initialized.push(a.target),g(a.target).removeAttr("title"),c.open()}}});a.exports=l,e.prototype.set("Behaviors.Tooltip",l)},function(a,b,c){var d,e,f;!function(g,h){e=[c(95)],d=h,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(this,function(a){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function d(a){var b=a.split(" "),c=h(b,2),d=c[0],e=c[1];if(["left","right"].indexOf(d)>=0){var f=[e,d];d=f[0],e=f[1]}return[d,e].join(" ")}function e(a,b){for(var c=void 0,d=[];-1!==(c=a.indexOf(b));)d.push(a.splice(c,1));return d}function f(){var h=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],k=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return new(g.apply(t,[null].concat(b)))};l(k,{createContext:f,drops:[],defaults:{}});var r={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}};l(k,r,h),l(k.defaults,r.defaults,h.defaults),"undefined"==typeof w[k.classPrefix]&&(w[k.classPrefix]=[]),k.updateBodyClasses=function(){for(var a=!1,b=w[k.classPrefix],c=b.length,d=0;c>d;++d)if(b[d].isOpened()){a=!0;break}a?m(document.body,k.classPrefix+"-open"):n(document.body,k.classPrefix+"-open")};var t=function(f){function g(a){if(b(this,g),j(Object.getPrototypeOf(g.prototype),"constructor",this).call(this),this.options=l({},k.defaults,a),this.target=this.options.target,"undefined"==typeof this.target)throw new Error("Drop Error: You must provide a target.");var c="data-"+k.classPrefix,d=this.target.getAttribute(c);d&&(this.options.content=d);for(var e=["position","openOn"],f=0;f<e.length;++f){var h=this.target.getAttribute(c+"-"+e[f]);h&&(this.options[e[f]]=h)}this.options.classes&&this.options.addTargetClasses!==!1&&m(this.target,this.options.classes),k.drops.push(this),w[k.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return c(g,f),i(g,[{key:"_on",value:function(a,b,c){this._boundEvents.push({element:a,event:b,handler:c}),a.addEventListener(b,c)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var a=this;if(this.drop=document.createElement("div"),m(this.drop,k.classPrefix),this.options.classes&&m(this.drop,this.options.classes),this.content=document.createElement("div"),m(this.content,k.classPrefix+"-content"),"function"==typeof this.options.content){var b=function(){var b=a.options.content.call(a,a);if("string"==typeof b)a.content.innerHTML=b;else{if("object"!=typeof b)throw new Error("Drop Error: Content function should return a string or HTMLElement.");a.content.innerHTML="",a.content.appendChild(b)}};b(),this.on("open",b.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var b=this.options.position.split(" ");b[0]=v[b[0]],b=b.join(" ");var c=[];this.options.constrainToScrollParent?c.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):c.push({to:"scrollParent"}),this.options.constrainToWindow!==!1?c.push({to:"window",attachment:"together"}):c.push({to:"window"});var e={element:this.drop,target:this.target,attachment:d(b),targetAttachment:d(this.options.position),classPrefix:k.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:c,addTargetClasses:this.options.addTargetClasses};this.options.tetherOptions!==!1&&(this.tether=new a(l({},e,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var a=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));var b=this.options.openOn.split(" ");if(b.indexOf("click")>=0)for(var c=function(b){a.toggle(b),b.preventDefault()},d=function(b){a.isOpened()&&(b.target===a.drop||a.drop.contains(b.target)||b.target===a.target||a.target.contains(b.target)||a.close(b))},e=0;e<q.length;++e){var f=q[e];this._on(this.target,f,c),this._on(document,f,d)}var g=!1,h=null,i=function(b){g=!0,a.open(b)},j=function(b){g=!1,"undefined"!=typeof h&&clearTimeout(h),h=setTimeout(function(){g||a.close(b),h=null},50)};b.indexOf("hover")>=0&&(this._on(this.target,"mouseover",i),this._on(this.drop,"mouseover",i),this._on(this.target,"mouseout",j),this._on(this.drop,"mouseout",j)),b.indexOf("focus")>=0&&(this._on(this.target,"focus",i),this._on(this.drop,"focus",i),this._on(this.target,"blur",j),this._on(this.drop,"blur",j))}}},{key:"isOpened",value:function(){return this.drop?o(this.drop,k.classPrefix+"-open"):void 0}},{key:"toggle",value:function(a){this.isOpened()?this.close(a):this.open(a)}},{key:"open",value:function(a){var b=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!=typeof this.tether&&this.tether.enable(),m(this.drop,k.classPrefix+"-open"),m(this.drop,k.classPrefix+"-open-transitionend"),setTimeout(function(){b.drop&&m(b.drop,k.classPrefix+"-after-open")}),"undefined"!=typeof this.tether&&this.tether.position(),this.trigger("open"),k.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(a){a.target===a.currentTarget&&(o(this.drop,k.classPrefix+"-open")||n(this.drop,k.classPrefix+"-open-transitionend"),this.drop.removeEventListener(s,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(a){var b=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,b=this.options.beforeClose(a,this)!==!1),this.isClosing=!1,b}},{key:"close",value:function(a){this.isOpened()&&this.beforeCloseHandler(a)&&(n(this.drop,k.classPrefix+"-open"),n(this.drop,k.classPrefix+"-after-open"),this.drop.addEventListener(s,this.transitionEndHandler),this.trigger("close"),"undefined"!=typeof this.tether&&this.tether.disable(),k.updateBodyClasses(),this.options.remove&&this.remove(a))}},{key:"remove",value:function(a){this.close(a),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!=typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),"undefined"!=typeof this.tether&&this.tether.destroy();for(var a=0;a<this._boundEvents.length;++a){var b=this._boundEvents[a],c=b.element,d=b.event,f=b.handler;c.removeEventListener(d,f)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,e(w[k.classPrefix],this),e(k.drops,this)}}]),g}(p);return k}var g=Function.prototype.bind,h=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},k=a.Utils,l=k.extend,m=k.addClass,n=k.removeClass,o=k.hasClass,p=k.Evented,q=["click"];"ontouchstart"in document.documentElement&&q.push("touchstart");var r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},s="";for(var t in r)if({}.hasOwnProperty.call(r,t)){var u=document.createElement("p");"undefined"!=typeof u.style[t]&&(s=r[t])}var v={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},w={},x=f();return document.addEventListener("DOMContentLoaded",function(){x.updateBodyClasses()}),x})},function(a,b,c){var d,e;!function(f,g){d=g,e="function"==typeof d?d.call(b,c,b,a):d,!(void 0!==e&&(a.exports=e))}(this,function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){var b=getComputedStyle(a),c=b.position;if("fixed"===c)return a;for(var d=a;d=d.parentNode;){var e=void 0;try{e=getComputedStyle(d)}catch(f){}if("undefined"==typeof e||null===e)return d;var g=e,h=g.overflow,i=g.overflowX,j=g.overflowY;if(/(auto|scroll)/.test(h+j+i)&&("absolute"!==c||["relative","absolute","fixed"].indexOf(e.position)>=0))return d}return document.body}function f(a){var b=void 0;a===document?(b=document,a=document.documentElement):b=a.ownerDocument;var c=b.documentElement,d={},e=a.getBoundingClientRect();for(var f in e)d[f]=e[f];var g=y(b);return d.top-=g.top,d.left-=g.left,"undefined"==typeof d.width&&(d.width=document.body.scrollWidth-d.left-d.right),"undefined"==typeof d.height&&(d.height=document.body.scrollHeight-d.top-d.bottom),d.top=d.top-c.clientTop,d.left=d.left-c.clientLeft,d.right=b.body.clientWidth-d.width-d.left,d.bottom=b.body.clientHeight-d.height-d.top,d}function g(a){return a.offsetParent||document.documentElement}function h(){var a=document.createElement("div");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");i(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;c===d&&(d=b.clientWidth),document.body.removeChild(b);var e=c-d;return{width:e,height:e}}function i(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=[];return Array.prototype.push.apply(b,arguments),b.slice(1).forEach(function(b){if(b)for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c])}),a}function j(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.remove(b)});else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),d=m(a).replace(c," ");n(a,d)}}function k(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.add(b)});else{j(a,b);var c=m(a)+(" "+b);n(a,c)}}function l(a,b){if("undefined"!=typeof a.classList)return a.classList.contains(b);var c=m(a);return new RegExp("(^| )"+b+"( |$)","gi").test(c)}function m(a){return a.className instanceof SVGAnimatedString?a.className.baseVal:a.className}function n(a,b){a.setAttribute("class",b)}function o(a,b,c){c.forEach(function(c){-1===b.indexOf(c)&&l(a,c)&&j(a,c)}),b.forEach(function(b){l(a,b)||k(a,b)})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function p(a,b){var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return a+c>=b&&b>=a-c}function q(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function r(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return c.forEach(function(b){var c=b.top,d=b.left;"string"==typeof c&&(c=parseFloat(c,10)),"string"==typeof d&&(d=parseFloat(d,10)),a.top+=c,a.left+=d}),a}function s(a,b){return"string"==typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*b.width),"string"==typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*b.height),a}function t(a,b){return"scrollParent"===b?b=a.scrollParent:"window"===b&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),b===document&&(b=b.documentElement),"undefined"!=typeof b.nodeType&&!function(){var a=f(b),c=a,d=getComputedStyle(b);b=[c.left,c.top,a.width+c.left,a.height+c.top],R.forEach(function(a,c){a=a[0].toUpperCase()+a.substr(1),"Top"===a||"Left"===a?b[c]+=parseFloat(d["border"+a+"Width"]):b[c]-=parseFloat(d["border"+a+"Width"])})}(),b}var u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=void 0;"undefined"==typeof v&&(v={modules:[]});var w=function(){var a=0;return function(){return++a}}(),x={},y=function(a){var b=a._tetherZeroElement;"undefined"==typeof b&&(b=a.createElement("div"),b.setAttribute("data-tether-id",w()),i(b.style,{top:0,left:0,position:"absolute"}),a.body.appendChild(b),a._tetherZeroElement=b);var c=b.getAttribute("data-tether-id");if("undefined"==typeof x[c]){x[c]={};var d=b.getBoundingClientRect();for(var e in d)x[c][e]=d[e];A(function(){delete x[c]})}return x[c]},z=[],A=function(a){z.push(a)},B=function(){for(var a=void 0;a=z.pop();)a()},C=function(){function a(){d(this,a)}return u(a,[{key:"on",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[a]&&(this.bindings[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[a])if("undefined"==typeof b)delete this.bindings[a];else for(var c=0;c<this.bindings[a].length;)this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):++c}},{key:"trigger",value:function(a){if("undefined"!=typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];for(;b<this.bindings[a].length;){var f=this.bindings[a][b],g=f.handler,h=f.ctx,i=f.once,j=h;"undefined"==typeof j&&(j=this),g.apply(j,d),i?this.bindings[a].splice(b,1):++b}}}}]),a}();v.Utils={getScrollParent:e,getBounds:f,getOffsetParent:g,extend:i,addClass:k,removeClass:j,hasClass:l,updateClasses:o,defer:A,flush:B,uniqueId:w,Evented:C,getScrollBarSize:h};var D=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();if("undefined"==typeof v)throw new Error("You must include the utils.js file before tether.js");var E=v.Utils,e=E.getScrollParent,f=E.getBounds,g=E.getOffsetParent,i=E.extend,k=E.addClass,j=E.removeClass,o=E.updateClasses,A=E.defer,B=E.flush,h=E.getScrollBarSize,F=function(){if("undefined"==typeof document)return"";for(var a=document.createElement("div"),b=["transform","webkitTransform","OTransform","MozTransform","msTransform"],c=0;c<b.length;++c){var d=b[c];if(void 0!==a.style[d])return d}}(),G=[],H=function(){G.forEach(function(a){a.position(!1)}),B()};!function(){var a=null,b=null,c=null,d=function e(){return"undefined"!=typeof b&&b>16?(b=Math.min(b-16,250),void(c=setTimeout(e,250))):void("undefined"!=typeof a&&q()-a<10||("undefined"!=typeof c&&(clearTimeout(c),c=null),a=q(),H(),b=q()-a))};"undefined"!=typeof window&&["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,d)})}();var I={center:"center",left:"right",right:"left"},J={middle:"middle",top:"bottom",bottom:"top"},K={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},L=function(a,b){var c=a.left,d=a.top;return"auto"===c&&(c=I[b.left]),"auto"===d&&(d=J[b.top]),{left:c,top:d}},M=function(a){var b=a.left,c=a.top;return"undefined"!=typeof K[a.left]&&(b=K[a.left]),"undefined"!=typeof K[a.top]&&(c=K[a.top]),{left:b,top:c}},N=function(a){var b=a.split(" "),c=D(b,2),d=c[0],e=c[1];return{top:d,left:e}},O=N,P=function(){function a(b){var c=this;d(this,a),this.position=this.position.bind(this),G.push(this),this.history=[],this.setOptions(b,!1),v.modules.forEach(function(a){"undefined"!=typeof a.initialize&&a.initialize.call(c)}),this.position()}return u(a,[{key:"getClass",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0],b=this.options.classes;return"undefined"!=typeof b&&b[a]?this.options.classes[a]:this.options.classPrefix?this.options.classPrefix+"-"+a:a}},{key:"setOptions",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],d={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=i(d,a);var f=this.options,g=f.element,h=f.target,j=f.targetModifier;if(this.element=g,this.target=h,this.targetModifier=j,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(a){if("undefined"==typeof b[a])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof b[a].jquery?b[a]=b[a][0]:"string"==typeof b[a]&&(b[a]=document.querySelector(b[a]))}),k(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&k(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=O(this.options.targetAttachment),this.attachment=O(this.options.attachment),this.offset=N(this.options.offset),this.targetOffset=N(this.options.targetOffset),"undefined"!=typeof this.scrollParent&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParent=this.target:this.scrollParent=e(this.target),this.options.enabled!==!1&&this.enable(c)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return f(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var a=f(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};return b.height=Math.min(b.height,a.height-(pageYOffset-a.top)),b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight))),b.height=Math.min(innerHeight,b.height),b.height-=2,b.width=Math.min(b.width,a.width-(pageXOffset-a.left)),b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth))),b.width=Math.min(innerWidth,b.width),b.width-=2,b.top<pageYOffset&&(b.top=pageYOffset),b.left<pageXOffset&&(b.left=pageXOffset),b}if("scroll-handle"===this.targetModifier){var a=void 0,c=this.target;c===document.body?(c=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=f(c);var d=getComputedStyle(c),e=c.scrollWidth>c.clientWidth||[d.overflow,d.overflowX].indexOf("scroll")>=0||this.target!==document.body,g=0;e&&(g=15);var h=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-g,b={width:15,height:.975*h*(h/c.scrollHeight),left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},i=0;408>h&&this.target===document.body&&(i=-11e-5*Math.pow(h,2)-.00727*h+22.58),this.target!==document.body&&(b.height=Math.max(b.height,24));var j=this.target.scrollTop/(c.scrollHeight-h);return b.top=j*(h-b.height-i)+a.top+parseFloat(d.borderTopWidth),this.target===document.body&&(b.height=Math.max(b.height,24)),b}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,b){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[a]&&(this._cache[a]=b.call(this)),this._cache[a]}},{key:"enable",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.options.addTargetClasses!==!1&&k(this.target,this.getClass("enabled")),k(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),a&&this.position()}},{key:"disable",value:function(){j(this.target,this.getClass("enabled")),j(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParent&&this.scrollParent.removeEventListener("scroll",this.position)}},{key:"destroy",value:function(){var a=this;this.disable(),G.forEach(function(b,c){return b===a?void G.splice(c,1):void 0})}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment,b=b||this.targetAttachment;var d=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var e=this._addAttachClasses;a.top&&e.push(this.getClass("element-attached")+"-"+a.top),a.left&&e.push(this.getClass("element-attached")+"-"+a.left),b.top&&e.push(this.getClass("target-attached")+"-"+b.top),b.left&&e.push(this.getClass("target-attached")+"-"+b.left);var f=[];d.forEach(function(a){f.push(c.getClass("element-attached")+"-"+a),f.push(c.getClass("target-attached")+"-"+a)}),A(function(){"undefined"!=typeof c._addAttachClasses&&(o(c.element,c._addAttachClasses,f),c.options.addTargetClasses!==!1&&o(c.target,c._addAttachClasses,f),delete c._addAttachClasses)})}},{key:"position",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var c=L(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var d=this.cache("element-bounds",function(){return f(a.element)}),e=d.width,i=d.height;if(0===e&&0===i&&"undefined"!=typeof this.lastSize){var j=this.lastSize;e=j.width,i=j.height}else this.lastSize={width:e,height:i};var k=this.cache("target-bounds",function(){return a.getTargetBounds()}),l=k,m=s(M(this.attachment),{width:e,height:i}),n=s(M(c),l),o=s(this.offset,{width:e,height:i}),p=s(this.targetOffset,l);m=r(m,o),n=r(n,p);for(var q=k.left+n.left-m.left,t=k.top+n.top-m.top,u=0;u<v.modules.length;++u){var w=v.modules[u],x=w.position.call(this,{left:q,top:t,targetAttachment:c,targetPos:k,elementPos:d,offset:m,targetOffset:n,manualOffset:o,manualTargetOffset:p,scrollbarSize:z,attachment:this.attachment});if(x===!1)return!1;"undefined"!=typeof x&&"object"==typeof x&&(t=x.top,q=x.left)}var y={page:{top:t,left:q},viewport:{top:t-pageYOffset,bottom:pageYOffset-t-i+innerHeight,left:q-pageXOffset,right:pageXOffset-q-e+innerWidth}},z=void 0;return document.body.scrollWidth>window.innerWidth&&(z=this.cache("scrollbar-size",h),y.viewport.bottom-=z.height),document.body.scrollHeight>window.innerHeight&&(z=this.cache("scrollbar-size",h),y.viewport.right-=z.width),(-1===["","static"].indexOf(document.body.style.position)||-1===["","static"].indexOf(document.body.parentElement.style.position))&&(y.page.bottom=document.body.scrollHeight-t-i,y.page.right=document.body.scrollWidth-q-e),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var b=a.cache("target-offsetparent",function(){return g(a.target)}),c=a.cache("target-offsetparent-bounds",function(){return f(b)}),d=getComputedStyle(b),e=c,h={};if(["Top","Left","Bottom","Right"].forEach(function(a){h[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])}),c.right=document.body.scrollWidth-c.left-e.width+h.right,c.bottom=document.body.scrollHeight-c.top-e.height+h.bottom,y.page.top>=c.top+h.top&&y.page.bottom>=c.bottom&&y.page.left>=c.left+h.left&&y.page.right>=c.right){var i=b.scrollTop,j=b.scrollLeft;y.offset={top:y.page.top-c.top+i-h.top,left:y.page.left-c.left+j-h.left}}}(),this.move(y),this.history.unshift(y),this.history.length>3&&this.history.pop(),b&&B(),!0}}},{key:"move",value:function(a){var b=this;if("undefined"!=typeof this.element.parentNode){var c={};for(var d in a){c[d]={};for(var e in a[d]){for(var f=!1,h=0;h<this.history.length;++h){var j=this.history[h];if("undefined"!=typeof j[d]&&!p(j[d][e],a[d][e])){f=!0;break}}f||(c[d][e]=!0)}}var k={top:"",left:"",right:"",bottom:""},l=function(a,c){var d="undefined"!=typeof b.options.optimizations,e=d?b.options.optimizations.gpu:null;if(e!==!1){var f=void 0,g=void 0;a.top?(k.top=0,f=c.top):(k.bottom=0,f=-c.bottom),a.left?(k.left=0,g=c.left):(k.right=0,g=-c.right),k[F]="translateX("+Math.round(g)+"px) translateY("+Math.round(f)+"px)","msTransform"!==F&&(k[F]+=" translateZ(0)")}else a.top?k.top=c.top+"px":k.bottom=c.bottom+"px",a.left?k.left=c.left+"px":k.right=c.right+"px"},m=!1;if((c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(k.position="absolute",l(c.page,a.page)):(c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)?(k.position="fixed",
l(c.viewport,a.viewport)):"undefined"!=typeof c.offset&&c.offset.top&&c.offset.left?!function(){k.position="absolute";var d=b.cache("target-offsetparent",function(){return g(b.target)});g(b.element)!==d&&A(function(){b.element.parentNode.removeChild(b.element),d.appendChild(b.element)}),l(c.offset,a.offset),m=!0}():(k.position="absolute",l({top:!0,left:!0},a.page)),!m){for(var n=!0,o=this.element.parentNode;o&&"BODY"!==o.tagName;){if("static"!==getComputedStyle(o).position){n=!1;break}o=o.parentNode}n||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var q={},r=!1;for(var e in k){var s=k[e],t=this.element.style[e];""!==t&&""!==s&&["top","left","bottom","right"].indexOf(e)>=0&&(t=parseFloat(t),s=parseFloat(s)),t!==s&&(r=!0,q[e]=s)}r&&A(function(){i(b.element.style,q)})}}}]),a}();P.modules=[],v.position=H;var Q=i(P,v),D=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=v.Utils,f=E.getBounds,i=E.extend,o=E.updateClasses,A=E.defer,R=["left","top","right","bottom"];v.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=a.targetAttachment;if(!this.options.constraints)return!0;var g=this.cache("element-bounds",function(){return f(b.element)}),h=g.height,j=g.width;if(0===j&&0===h&&"undefined"!=typeof this.lastSize){var k=this.lastSize;j=k.width,h=k.height}var l=this.cache("target-bounds",function(){return b.getTargetBounds()}),m=l.height,n=l.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass,c=a.pinnedClass;b&&p.push(b),c&&p.push(c)}),p.forEach(function(a){["left","top","right","bottom"].forEach(function(b){p.push(a+"-"+b)})});var q=[],r=i({},e),s=i({},this.attachment);return this.options.constraints.forEach(function(a){var f=a.to,g=a.attachment,i=a.pin;"undefined"==typeof g&&(g="");var k=void 0,l=void 0;if(g.indexOf(" ")>=0){var o=g.split(" "),p=D(o,2);l=p[0],k=p[1]}else k=l=g;var u=t(b,f);("target"===l||"both"===l)&&(c<u[1]&&"top"===r.top&&(c+=m,r.top="bottom"),c+h>u[3]&&"bottom"===r.top&&(c-=m,r.top="top")),"together"===l&&(c<u[1]&&"top"===r.top&&("bottom"===s.top?(c+=m,r.top="bottom",c+=h,s.top="top"):"top"===s.top&&(c+=m,r.top="bottom",c-=h,s.top="bottom")),c+h>u[3]&&"bottom"===r.top&&("top"===s.top?(c-=m,r.top="top",c-=h,s.top="bottom"):"bottom"===s.top&&(c-=m,r.top="top",c+=h,s.top="top")),"middle"===r.top&&(c+h>u[3]&&"top"===s.top?(c-=h,s.top="bottom"):c<u[1]&&"bottom"===s.top&&(c+=h,s.top="top"))),("target"===k||"both"===k)&&(d<u[0]&&"left"===r.left&&(d+=n,r.left="right"),d+j>u[2]&&"right"===r.left&&(d-=n,r.left="left")),"together"===k&&(d<u[0]&&"left"===r.left?"right"===s.left?(d+=n,r.left="right",d+=j,s.left="left"):"left"===s.left&&(d+=n,r.left="right",d-=j,s.left="right"):d+j>u[2]&&"right"===r.left?"left"===s.left?(d-=n,r.left="left",d-=j,s.left="right"):"right"===s.left&&(d-=n,r.left="left",d+=j,s.left="left"):"center"===r.left&&(d+j>u[2]&&"left"===s.left?(d-=j,s.left="right"):d<u[0]&&"right"===s.left&&(d+=j,s.left="left"))),("element"===l||"both"===l)&&(c<u[1]&&"bottom"===s.top&&(c+=h,s.top="top"),c+h>u[3]&&"top"===s.top&&(c-=h,s.top="bottom")),("element"===k||"both"===k)&&(d<u[0]&&"right"===s.left&&(d+=j,s.left="left"),d+j>u[2]&&"left"===s.left&&(d-=j,s.left="right")),"string"==typeof i?i=i.split(",").map(function(a){return a.trim()}):i===!0&&(i=["top","left","right","bottom"]),i=i||[];var v=[],w=[];c<u[1]&&(i.indexOf("top")>=0?(c=u[1],v.push("top")):w.push("top")),c+h>u[3]&&(i.indexOf("bottom")>=0?(c=u[3]-h,v.push("bottom")):w.push("bottom")),d<u[0]&&(i.indexOf("left")>=0?(d=u[0],v.push("left")):w.push("left")),d+j>u[2]&&(i.indexOf("right")>=0?(d=u[2]-j,v.push("right")):w.push("right")),v.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.pinnedClass?b.options.pinnedClass:b.getClass("pinned"),q.push(a),v.forEach(function(b){q.push(a+"-"+b)})}(),w.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.outOfBoundsClass?b.options.outOfBoundsClass:b.getClass("out-of-bounds"),q.push(a),w.forEach(function(b){q.push(a+"-"+b)})}(),(v.indexOf("left")>=0||v.indexOf("right")>=0)&&(s.left=r.left=!1),(v.indexOf("top")>=0||v.indexOf("bottom")>=0)&&(s.top=r.top=!1),(r.top!==e.top||r.left!==e.left||s.top!==b.attachment.top||s.left!==b.attachment.left)&&b.updateAttachClasses(s,r)}),A(function(){b.options.addTargetClasses!==!1&&o(b.target,q,p),o(b.element,q,p)}),{top:c,left:d}}});var E=v.Utils,f=E.getBounds,o=E.updateClasses,A=E.defer;v.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=this.cache("element-bounds",function(){return f(b.element)}),g=e.height,h=e.width,i=this.getTargetBounds(),j=c+g,k=d+h,l=[];c<=i.bottom&&j>=i.top&&["left","right"].forEach(function(a){var b=i[a];(b===d||b===k)&&l.push(a)}),d<=i.right&&k>=i.left&&["top","bottom"].forEach(function(a){var b=i[a];(b===c||b===j)&&l.push(a)});var m=[],n=[],p=["left","top","right","bottom"];return m.push(this.getClass("abutted")),p.forEach(function(a){m.push(b.getClass("abutted")+"-"+a)}),l.length&&n.push(this.getClass("abutted")),l.forEach(function(a){n.push(b.getClass("abutted")+"-"+a)}),A(function(){b.options.addTargetClasses!==!1&&o(b.target,n,m),o(b.element,n,m)}),!0}});var D=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return v.modules.push({position:function(a){var b=a.top,c=a.left;if(this.options.shift){var d=this.options.shift;"function"==typeof this.options.shift&&(d=this.options.shift.call(this,{top:b,left:c}));var e=void 0,f=void 0;if("string"==typeof d){d=d.split(" "),d[1]=d[1]||d[0];var g=d,h=D(g,2);e=h[0],f=h[1],e=parseFloat(e,10),f=parseFloat(f,10)}else e=d.top,f=d.left;return b+=e,c+=f,{top:b,left:c}}}}),Q})},function(a,b,c){var d=c(82),e=c(2),f=c(97),g=c(99),h=c(4),i=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},fetch:function(){return this.model.isNew()?this.model.fetch():void 0},render:function(){var a=new f({model:this.model});this.listenTo(a,"open:modal",this.openModal),this.container.show(a)},openModal:function(a,b){var c=this.model.collection.add({id:"gateway_"+a});c.get("title")||this.initModalData(c,b);var d=new g({tmpl:b.modalTmpl,model:c}),e=this;h.request("modal","open",d).then(function(a){var b=a.view.getButtons();e.listenTo(b,"action:save",function(a){c.save([],{buttons:a})})})},initModalData:function(a,b){function c(b){return"#"+a.id+" .gateway-"+b}var d={title:b.$(c("name")).html(),description:b.$(c("description")).html(),icon:b.$(c("icon")).data("show")?!0:!1};d.hasIcon=b.$(c("icon")).data("icon"),a.set(d)}});a.exports=i,e.prototype.set("SettingsApp.Route",i)},function(a,b,c){var d=c(88),e=c(6),f=c(2),g=c(93),h=c(98),i=d.extend({template:"checkout",attributes:{id:"wc_pos-settings-checkout"},modelEvents:{"change:id":"render"},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.modalTmpl=this.$("#tmpl-gateway-settings-modal").html()},ui:{settings:".gateway-settings"},events:{"click @ui.settings":"openGatewaySettingsModal"},behaviors:{Tooltip:{behaviorClass:g},Sortable:{behaviorClass:h}},openGatewaySettingsModal:function(a){a.preventDefault();var b=e(a.target).data("gateway");this.trigger("open:modal",b,this)}});a.exports=i,f.prototype.set("SettingsApp.View")},function(a,b,c){var d=c(79),e=c(2),f=c(6),g=c(5),h=d.extend({initialize:function(a){this.options=g.defaults(a,{items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,helper:function(a,b){return b.children().each(function(){f(this).width(f(this).width())}),b},start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style"),f("input.gateway_order",this).each(function(a){f(this).val(a),f(this).trigger("input")})}})},ui:{sortable:".sortable"},onRender:function(){if(this.ui.sortable.length>0){var a=this.ui.sortable,b=a.find("tbody tr").get();a.append(b.sort(function(a,b){return parseInt(f(a).find("input.gateway_order").val(),10)-parseInt(f(b).find("input.gateway_order").val(),10)})),a.sortable(this.options)}}});a.exports=h,e.prototype.set("Behaviors.Sortable",h)},function(a,b,c){var d=c(88),e=c(6),f=c(93),g=c(4);a.exports=d.extend({tagName:"table",className:"wc_pos-form-table",initialize:function(a){a=a||{},this.template=a.tmpl.trim(),this.modal={header:{title:this.model.get("title")},footer:{buttons:[{type:"message"},{action:"save",className:"button-primary",icon:"prepend"}]}}},behaviors:{Tooltip:{behaviorClass:f}},modelEvents:{"change:title":function(a,b){var c={};c.header={title:b},g.request("modal","update",c)}},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.model.get("hasIcon")&&this.$("#icon").closest("tr").show()}})},function(a,b,c){var d=c(82),e=c(2),f=c(101),g=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},render:function(){var a=new f({model:this.model});this.container.show(a)}});a.exports=g,e.prototype.set("SettingsApp.HotKeys.Route",g)},function(a,b,c){var d=c(88),e=c(6),f=c(2),g=c(93),h=d.extend({template:"hotkeys",attributes:{id:"wc_pos-settings-hotkeys"},behaviors:{Tooltip:{behaviorClass:g}},modelEvents:{"change:id":"render"},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)})}});a.exports=h,f.prototype.set("SettingsApp.HotKeys.View")},function(a,b,c){var d=c(82),e=c(2),f=c(103),g=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},fetch:function(){return this.model.isNew()?this.model.fetch():void 0},render:function(){var a=new f({model:this.model});this.container.show(a)}});a.exports=g,e.prototype.set("SettingsApp.Access.Route",g)},function(a,b,c){var d=c(88),e=c(2),f=c(6),g=d.extend({template:"access",attributes:{id:"wc_pos-settings-access"},ui:{tabs:".wc_pos-access-tabs > li",options:".wc_pos-access-panel > li"},events:{"click @ui.tabs":"onTabClick"},modelEvents:{"change:id":"render"},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=f(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.ui.tabs.first().addClass("active"),this.ui.options.first().addClass("active")},onTabClick:function(a){this.ui.tabs.each(function(){f(this).removeClass("active")}),this.ui.options.each(function(){f(this).removeClass("active")}),f(a.currentTarget).addClass("active");var b=f(a.currentTarget).data("id");f("#"+b).addClass("active")}});a.exports=g,e.prototype.set("SettingsApp.Access.View")},function(a,b,c){var d=c(82),e=c(2),f=c(105),g=c(107),h=c(108),i=c(4),j=d.extend({initialize:function(a){a=a||{},this.container=a.container},render:function(){var a=new f;this.listenTo(a,{"translation:update":this.openTranslationModal,"data:delete":this.openDataDeleteModal}),this.container.show(a)},openTranslationModal:function(a){var b=a.view.$('[data-action="translation"]').data("title"),c=new g({title:b});i.request("modal","open",c)},openDataDeleteModal:function(a){var b=a.view.$('[data-action="delete-local-data"]').data("title"),c=new h({title:b});i.request("modal","open",c)}});a.exports=j,e.prototype.set("SettingsApp.Tools.Route",j)},function(a,b,c){var d=c(61),e=c(2),f=c(106),g=d.extend({template:"tools",attributes:{id:"wc_pos-settings-tools"},behaviors:{EmulateHTTP:{behaviorClass:f}},ui:{translation:'*[data-action="translation"]',deleteData:'*[data-action="delete-local-data"]'},triggers:{"click @ui.translation":"translation:update","click @ui.deleteData":"data:delete"}});a.exports=g,e.prototype.set("SettingsApp.Tools.View")},function(a,b,c){var d=c(79),e=c(2),f=c(6),g=c(4),h=d.extend({ui:{toggle:'*[data-action^="legacy-"]'},events:{"click @ui.toggle":"toggle"},toggle:function(a){a.preventDefault();var b=g.request("entities","get",{type:"option",name:"ajaxurl"}),c=g.request("entities","get",{type:"option",name:"nonce"});f.getJSON(b,{action:"wc_pos_toggle_legacy_server",enable:"enable"===f(a.target).data("action").split("-").pop(),security:c},function(){window.location.reload()})}});a.exports=h,e.prototype.set("Behaviors.EmulateHTTP",h)},function(a,b,c){(function(b){var d=c(61),e=c(4),f=b.EventSource;a.exports=d.extend({template:function(){return'<i class="wc_pos-icon-loading"></i>'},initialize:function(a){a=a||{},this.modal={header:{title:a.title},footer:{show:!1,buttons:[{action:"close",className:"button"}]}}},ui:{loading:".wc_pos-icon-loading"},onShow:function(){var a=this,b=this.constructURL(),c=new f(b);c.onmessage=function(b){"complete"===b.data?(this.close(),a.ui.loading.hide(),e.request("modal","update",{footer:{show:!0}})):a.ui.loading.before("<p>"+b.data+"</p>")}},constructURL:function(){var a=e.request("entities","get",{type:"option",name:"ajaxurl"}),b=e.request("entities","get",{type:"option",name:"nonce"});return a+"?action=wc_pos_update_translations&security="+b}})}).call(b,function(){return this}())},function(a,b,c){var d=c(61);a.exports=d.extend({dbs:["wc_pos_products","wc_pos_cart","wc_pos_orders","wc_pos_customers","wc_pos_coupons"],template:function(){return'<i class="wc_pos-icon-loading"></i>'},initialize:function(a){a=a||{},this.modal={header:{title:a.title},footer:{show:!1,buttons:[{action:"close",className:"button"}]}}},ui:{loading:".wc_pos-icon-loading"},onShow:function(){return window.indexedDB&&window.indexedDB.deleteDatabase?void this.deleteDatabases():void this.printToScreen("Browser does not support IndexedDB deleteDatabase!")},printToScreen:function(a){this.ui.loading.before(a+" ")},deleteDatabases:function(){var a=this,b=this.dbs.shift(),c=window.indexedDB.deleteDatabase(b);c.onerror=function(){a.printToScreen("Error deleting database, please make sure the POS is not open in another tab.")},c.onsuccess=function(){window.localStorage.removeItem(b+"_idbVersion"),0===a.dbs.length?(a.ui.loading.hide(),a.printToScreen("All local data deleted successfully.")):(a.printToScreen("."),a.deleteDatabases())}}})},function(a,b,c){var d=c(82),e=c(2),f=c(110),g=d.extend({initialize:function(a){a=a||{},this.container=a.container},fetch:function(){},render:function(){var a=new f;this.container.show(a)}});a.exports=g,e.prototype.set("SettingsApp.Status.Route",g)},function(a,b,c){var d=c(61),e=c(2),f=c(106),g=d.extend({template:"status",attributes:{id:"wc_pos-settings-status"},behaviors:{EmulateHTTP:{behaviorClass:f}}});a.exports=g,e.prototype.set("SettingsApp.Status.View")},function(a,b,c){var d=c(5),e=c(7),f=c(9),g=c(27),h=c(8),i=c(2);e.registerHelper("is",function(a,b,c){return a&&d.includes(b.split("|"),a)?c.fn(this):c.inverse(this)}),e.registerHelper("compare",function(a,b,c,d){if(arguments.length<3)throw new Error('Handlebars Helper "compare" needs 2 parameters');void 0===d&&(d=c,c=b,b="===");var e={"===":function(a,b){return a===b},"!==":function(a,b){return a!==b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b}};if(!e[b])throw new Error('Handlebars Helper "compare" doesn\'t know the operator '+b);var f=e[b](a,c);return f?d.fn(this):d.inverse(this)}),e.registerHelper("list",function(a,b,c){if(d.isArray(a)||d.isObject(a)){var e=d.map(a,c.fn);return e.join(b)}return c.fn(a)}),e.registerHelper("csv",function(a,b){return b.fn(a.join(", "))}),e.registerHelper("money",function(a,b){var c=f.settings.currency.precision,d=b.hash.precision||c;return"auto"===d&&(d=h.decimalPlaces(a)),a=h.round(a,d),b.hash.negative&&(a=-1*a),f.formatMoney(a)}),e.registerHelper("number",function(a,b){var c=f.settings.number.precision,d=b.hash.precision||c;return"auto"===d&&(d=h.decimalPlaces(a)),b.hash.negative&&(a=-1*a),f.formatNumber(a,d)}),e.registerHelper("formatAddress",function(a,b){a=a||{};var c=[[a.first_name,a.last_name],[a.company],[a.address_1],[a.address_2],[a.city,a.state,a.postcode]],f=d.chain(c).map(function(a){return d.compact(a).join(" ")}).compact().join("<br>\n").value();return""!==f&&b.hash.title&&(f="<h3>"+b.hash.title+"</h3>\n"+f),new e.SafeString(f)}),e.registerHelper("formatDate",function(a,b){var c=b.hash.format||"";return g(a).format(c)}),e.registerHelper("formatDay",function(a,b){var c=b.hash.format||"",d=parseInt(a,10)+1;return g().isoWeekday(d).format(c)}),e.registerHelper("debug",function(a){console.log("Current Context"),console.log("===================="),console.log(this),a&&(console.log("Value"),console.log("===================="),console.log(a))}),e.registerHelper("formatCustomerName",function(a){var b=d(a).pick(["first_name","last_name"]).values().map(function(a){return a.trim()}).compact().value().join(" ");return a&&!b&&(b=a.username),b}),e.registerHelper("namespace",function(a){return i.prototype.namespace(a)})}]);